[{"filePath":"D:\\Projects\\MPPMS\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\admin\\AdminStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\admin\\DeletePaperDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\admin\\HighAdminControls.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2330,2333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2330,2333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":82,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3547,3550],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3547,3550],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":99,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":112,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":112,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":124,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":23}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { usersApi } from '../../lib/firebase/users'\r\nimport { configsApi, FilterConfig, SocialConfig, DonationConfig } from '../../lib/firebase/configs'\r\nimport { donationsApi } from '../../lib/firebase/donations'\r\nimport { UserProfile, Contribution } from '../../lib/firebase/schema'\r\nimport { Tabs, Tab, Box, Snackbar, Alert } from '@mui/material'\r\nimport { People, Settings, LocalCafe } from '@mui/icons-material'\r\nimport { useAuth } from '../../context/AuthContext'\r\nimport { UserManager } from './tabs/UserManager'\r\nimport { ConfigManager } from './tabs/ConfigManager'\r\nimport { DonationManager } from './tabs/DonationManager'\r\n\r\ninterface TabPanelProps {\r\n    children?: React.ReactNode;\r\n    index: number;\r\n    value: number;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n    const { children, value, index, ...other } = props;\r\n    return (\r\n        <div role=\"tabpanel\" hidden={value !== index} {...other}>\r\n            {value === index && (\r\n                <Box sx={{ p: { xs: 2, sm: 3 } }}>\r\n                    {children}\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function HighAdminControls() {\r\n    const { user: currentUser } = useAuth()\r\n    const [tabValue, setTabValue] = useState(0)\r\n    const [users, setUsers] = useState<UserProfile[]>([])\r\n    const [socials, setSocials] = useState<SocialConfig | null>(null)\r\n    const [donations, setDonations] = useState<Contribution[]>([])\r\n    const [donationConfig, setDonationConfig] = useState<DonationConfig>({ coffeePrice: 5, enabled: true })\r\n    const [filterTexts, setFilterTexts] = useState<Record<string, string>>({})\r\n    const [loading, setLoading] = useState(false)\r\n    const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' as 'success' | 'error' })\r\n\r\n    useEffect(() => {\r\n        loadData()\r\n    }, [])\r\n\r\n    const loadData = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const [u, f, s, d, dc] = await Promise.all([\r\n                usersApi.getAllUsers(),\r\n                configsApi.getFilters(),\r\n                configsApi.getSocials(),\r\n                donationsApi.getContributions(),\r\n                configsApi.getDonationSettings()\r\n            ])\r\n            setUsers(u)\r\n            const texts: any = {}\r\n            Object.keys(f).forEach(key => {\r\n                texts[key] = f[key as keyof FilterConfig].join(', ')\r\n            })\r\n            setFilterTexts(texts)\r\n            setSocials(s)\r\n            setDonations(d)\r\n            setDonationConfig(dc)\r\n        } catch (error) {\r\n            console.error(error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleTransferOwnership = async (targetUid: string) => {\r\n        if (!currentUser) return\r\n        if (!window.confirm(\"Are you sure? You will lose Super Admin status.\")) return\r\n\r\n        setLoading(true)\r\n        try {\r\n            await usersApi.transferSuperAdmin(currentUser.uid, targetUid)\r\n            setSnackbar({ open: true, message: 'Ownership transferred! Reloading...', severity: 'success' })\r\n            setTimeout(() => window.location.reload(), 2000)\r\n        } catch (error) {\r\n            setSnackbar({ open: true, message: 'Transfer failed', severity: 'error' })\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleSaveFilters = async () => {\r\n        if (!filterTexts) return\r\n        setLoading(true)\r\n        try {\r\n            const newFilters: any = {}\r\n            Object.keys(filterTexts).forEach(key => {\r\n                newFilters[key] = filterTexts[key].split(',').map(s => s.trim()).filter(Boolean)\r\n            })\r\n            await configsApi.updateFilters(newFilters as FilterConfig)\r\n            setSnackbar({ open: true, message: 'Filters updated successfully!', severity: 'success' })\r\n        } catch (error) {\r\n            setSnackbar({ open: true, message: 'Failed to update filters', severity: 'error' })\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleSaveSocials = async () => {\r\n        if (!socials) return\r\n        setLoading(true)\r\n        try {\r\n            await configsApi.updateSocials(socials)\r\n            setSnackbar({ open: true, message: 'Social links updated successfully!', severity: 'success' })\r\n        } catch (error) {\r\n            setSnackbar({ open: true, message: 'Failed to update social links', severity: 'error' })\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleSaveDonationConfig = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await configsApi.updateDonationSettings(donationConfig)\r\n            setSnackbar({ open: true, message: 'Donation settings updated successfully!', severity: 'success' })\r\n        } catch (error) {\r\n            setSnackbar({ open: true, message: 'Failed to update donation settings', severity: 'error' })\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white min-h-[500px]\">\r\n            <div className=\"border-b border-muted bg-muted/10 sticky top-0 z-30\">\r\n                <Tabs\r\n                    value={tabValue}\r\n                    onChange={(_, v) => setTabValue(v)}\r\n                    variant=\"scrollable\"\r\n                    scrollButtons=\"auto\"\r\n                    allowScrollButtonsMobile\r\n                    sx={{\r\n                        '& .MuiTab-root': {\r\n                            minHeight: 64,\r\n                            textTransform: 'none',\r\n                            fontWeight: 700,\r\n                            fontSize: '0.9rem'\r\n                        }\r\n                    }}\r\n                >\r\n                    <Tab icon={<People />} label=\"Users\" iconPosition=\"start\" />\r\n                    <Tab icon={<Settings />} label=\"Config\" iconPosition=\"start\" />\r\n                    <Tab icon={<LocalCafe />} label=\"Donations\" iconPosition=\"start\" />\r\n                </Tabs>\r\n            </div>\r\n\r\n            <TabPanel value={tabValue} index={0}>\r\n                <UserManager\r\n                    users={users}\r\n                    onUserUpdate={(uid, blocked) => setUsers(users.map(u => u.uid === uid ? { ...u, blocked } : u))}\r\n                    onTransferOwnership={handleTransferOwnership}\r\n                />\r\n            </TabPanel>\r\n\r\n            <TabPanel value={tabValue} index={1}>\r\n                <ConfigManager\r\n                    filterTexts={filterTexts}\r\n                    socials={socials}\r\n                    loading={loading}\r\n                    onUpdateFilterList={(key, value) => setFilterTexts(prev => ({ ...prev, [key]: value }))}\r\n                    onUpdateSocials={setSocials}\r\n                    onSaveFilters={handleSaveFilters}\r\n                    onSaveSocials={handleSaveSocials}\r\n                    onSnackbar={(message, severity) => setSnackbar({ open: true, message, severity })}\r\n                />\r\n            </TabPanel>\r\n\r\n            <TabPanel value={tabValue} index={2}>\r\n                <DonationManager\r\n                    donations={donations}\r\n                    donationConfig={donationConfig}\r\n                    loading={loading}\r\n                    onUpdateDonationConfig={setDonationConfig}\r\n                    onSaveDonationConfig={handleSaveDonationConfig}\r\n                />\r\n            </TabPanel>\r\n\r\n            <Snackbar\r\n                open={snackbar.open}\r\n                autoHideDuration={4000}\r\n                onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n            >\r\n                <Alert\r\n                    onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n                    severity={snackbar.severity}\r\n                    sx={{ borderRadius: '1rem', fontWeight: 700 }}\r\n                >\r\n                    {snackbar.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\admin\\SettingsManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":45,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":57,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { Save, Loader2, Globe, Facebook, Instagram, Twitter, List, Plus, Trash2 } from 'lucide-react'\r\nimport { Button } from \"../ui/Button\"\r\nimport { Input } from \"../ui/Input\"\r\nimport { configsApi, FilterConfig, SocialConfig } from '../../lib/firebase/configs'\r\nimport { Snackbar, Alert } from '@mui/material'\r\n\r\nexport function SettingsManager() {\r\n    const [configs, setConfigs] = useState<FilterConfig | null>(null)\r\n    const [socials, setSocials] = useState<SocialConfig | null>(null)\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [isSavingFilters, setIsSavingFilters] = useState(false)\r\n    const [isSavingSocials, setIsSavingSocials] = useState(false)\r\n    const [feedback, setFeedback] = useState<{ open: boolean, message: string, severity: 'success' | 'error' }>({\r\n        open: false,\r\n        message: '',\r\n        severity: 'success'\r\n    })\r\n\r\n    const titles: Record<string, string> = {\r\n        subjects: 'Academic Subjects',\r\n        categories: 'Paper Categories',\r\n        parts: 'Paper Parts / Components',\r\n        languages: 'Language Options',\r\n        years: 'Academic Years'\r\n    }\r\n\r\n    useEffect(() => {\r\n        const load = async () => {\r\n            const f = await configsApi.getFilters()\r\n            const s = await configsApi.getSocials()\r\n            setConfigs(f)\r\n            setSocials(s)\r\n            setIsLoading(false)\r\n        }\r\n        load()\r\n    }, [])\r\n\r\n    const handleSaveFilters = async () => {\r\n        if (!configs) return\r\n        setIsSavingFilters(true)\r\n        try {\r\n            await configsApi.updateFilters(configs)\r\n            setFeedback({ open: true, message: 'Filters updated successfully!', severity: 'success' })\r\n        } catch (error) {\r\n            setFeedback({ open: true, message: 'Failed to update filters', severity: 'error' })\r\n        }\r\n        setIsSavingFilters(false)\r\n    }\r\n\r\n    const handleSaveSocials = async () => {\r\n        if (!socials) return\r\n        setIsSavingSocials(true)\r\n        try {\r\n            await configsApi.updateSocials(socials)\r\n            setFeedback({ open: true, message: 'Social links updated successfully!', severity: 'success' })\r\n        } catch (error) {\r\n            setFeedback({ open: true, message: 'Failed to update social links', severity: 'error' })\r\n        }\r\n        setIsSavingSocials(false)\r\n    }\r\n\r\n    const addFilterItem = (type: keyof FilterConfig) => {\r\n        if (!configs) return\r\n        setConfigs({\r\n            ...configs,\r\n            [type]: [...configs[type], \"New Item\"]\r\n        })\r\n    }\r\n\r\n    const removeFilterItem = (type: keyof FilterConfig, index: number) => {\r\n        if (!configs) return\r\n        const updated = configs[type].filter((_, i) => i !== index)\r\n        setConfigs({ ...configs, [type]: updated })\r\n    }\r\n\r\n    const updateFilterItem = (type: keyof FilterConfig, index: number, value: string) => {\r\n        if (!configs) return\r\n        const updated = [...configs[type]]\r\n        updated[index] = value\r\n        setConfigs({ ...configs, [type]: updated })\r\n    }\r\n\r\n    if (isLoading) return <div className=\"flex justify-center p-12\"><Loader2 className=\"h-8 w-8 animate-spin text-primary\" /></div>\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n            {/* Filters Card */}\r\n            <div className=\"bg-card border border-muted rounded-[2.5rem] shadow-xl shadow-black/5 p-8 space-y-6\">\r\n                <div className=\"flex items-center justify-between gap-4 border-b border-muted pb-6\">\r\n                    <h2 className=\"text-xl font-bold text-foreground flex items-center gap-2\">\r\n                        <List className=\"h-5 w-5 text-primary\" />\r\n                        Dynamic Filters\r\n                    </h2>\r\n                    <Button\r\n                        size=\"sm\"\r\n                        className=\"font-bold rounded-xl h-10 px-4\"\r\n                        onClick={handleSaveFilters}\r\n                        disabled={isSavingFilters}\r\n                    >\r\n                        {isSavingFilters ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Save className=\"mr-2 h-4 w-4\" />}\r\n                        Save Changes\r\n                    </Button>\r\n                </div>\r\n\r\n                <div className=\"space-y-8\">\r\n                    {(['subjects', 'categories', 'parts', 'languages', 'years'] as const).map((type) => (\r\n                        <div key={type} className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <h3 className=\"text-[10px] font-bold uppercase tracking-[0.2em] text-muted-foreground\">\r\n                                    {titles[type] || type}\r\n                                </h3>\r\n                                <button onClick={() => addFilterItem(type)} className=\"text-[10px] font-bold uppercase tracking-widest text-primary hover:underline flex items-center gap-1\">\r\n                                    <Plus className=\"h-3 w-3\" /> Add New\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"space-y-3\">\r\n                                {configs?.[type]?.map((item, idx) => (\r\n                                    <div key={idx} className=\"flex gap-2\">\r\n                                        <Input\r\n                                            value={item}\r\n                                            onChange={(e) => updateFilterItem(type, idx, e.target.value)}\r\n                                            className=\"h-11 font-bold rounded-xl bg-muted/30 border-none focus:ring-primary/20\"\r\n                                        />\r\n                                        <button\r\n                                            onClick={() => removeFilterItem(type, idx)}\r\n                                            className=\"h-11 w-11 flex items-center justify-center text-muted-foreground hover:bg-destructive/5 hover:text-destructive rounded-xl transition-all border border-muted\"\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Social Links Card */}\r\n            <div className=\"bg-card border border-muted rounded-[2.5rem] shadow-xl shadow-black/5 p-8 space-y-6\">\r\n                <div className=\"flex items-center justify-between gap-4 border-b border-muted pb-6\">\r\n                    <h2 className=\"text-xl font-bold text-secondary-foreground flex items-center gap-2\">\r\n                        <Globe className=\"h-5 w-5 text-primary\" />\r\n                        Platform Settings\r\n                    </h2>\r\n                    <Button\r\n                        size=\"sm\"\r\n                        className=\"font-bold rounded-xl h-10 px-4\"\r\n                        onClick={handleSaveSocials}\r\n                        disabled={isSavingSocials}\r\n                    >\r\n                        {isSavingSocials ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Save className=\"mr-2 h-4 w-4\" />}\r\n                        Save Changes\r\n                    </Button>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {(['twitter', 'facebook', 'instagram'] as const).map(platform => (\r\n                        <div key={platform} className=\"space-y-2\">\r\n                            <label className=\"text-[10px] font-bold uppercase tracking-[0.2em] text-muted-foreground flex items-center gap-2\">\r\n                                {platform === 'twitter' && <Twitter className=\"h-3 w-3\" />}\r\n                                {platform === 'facebook' && <Facebook className=\"h-3 w-3\" />}\r\n                                {platform === 'instagram' && <Instagram className=\"h-3 w-3\" />}\r\n                                {platform} URL\r\n                            </label>\r\n                            <Input\r\n                                value={socials?.[platform] || ''}\r\n                                onChange={(e) => setSocials({ ...socials, [platform]: e.target.value })}\r\n                                placeholder={`https://${platform}.com/...`}\r\n                                className=\"h-12 font-bold rounded-xl bg-muted/30 border-none focus:ring-primary/20\"\r\n                            />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <Snackbar\r\n                open={feedback.open}\r\n                autoHideDuration={6000}\r\n                onClose={() => setFeedback({ ...feedback, open: false })}\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n            >\r\n                <Alert\r\n                    onClose={() => setFeedback({ ...feedback, open: false })}\r\n                    severity={feedback.severity}\r\n                    sx={{ width: '100%', borderRadius: '1rem', fontWeight: 700 }}\r\n                >\r\n                    {feedback.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\admin\\tabs\\ConfigManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":34,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { SocialConfig } from '../../../lib/firebase/configs'\r\nimport { statsApi } from '../../../lib/firebase/stats'\r\nimport { Button } from '../../ui/Button'\r\nimport { Input } from '../../ui/Input'\r\nimport { Save, Lock } from '@mui/icons-material'\r\n\r\ninterface ConfigManagerProps {\r\n    filterTexts: Record<string, string>;\r\n    socials: SocialConfig | null;\r\n    loading: boolean;\r\n    onUpdateFilterList: (key: string, value: string) => void;\r\n    onUpdateSocials: (socials: SocialConfig) => void;\r\n    onSaveFilters: () => void;\r\n    onSaveSocials: () => void;\r\n    onSnackbar: (message: string, severity: 'success' | 'error') => void;\r\n}\r\n\r\nexport function ConfigManager({\r\n    filterTexts,\r\n    socials,\r\n    loading,\r\n    onUpdateFilterList,\r\n    onUpdateSocials,\r\n    onSaveFilters,\r\n    onSaveSocials,\r\n    onSnackbar\r\n}: ConfigManagerProps) {\r\n\r\n    const handleResetVisitors = async () => {\r\n        if (!window.confirm(\"Are you sure you want to reset the visitor count to zero?\")) return\r\n        try {\r\n            await statsApi.resetVisitors()\r\n            onSnackbar('Visitor count reset successfully!', 'success')\r\n        } catch (error) {\r\n            onSnackbar('Failed to reset visitor count', 'error')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 pb-8\">\r\n            <div>\r\n                <h3 className=\"text-xl font-bold text-secondary mb-4\">Global Filters</h3>\r\n                <p className=\"text-sm text-muted-foreground mb-4\">Comma-separated values for dropdowns.</p>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    {filterTexts && Object.keys(filterTexts).map((key) => (\r\n                        <div key={key}>\r\n                            <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground mb-1 block\">{key}</label>\r\n                            <textarea\r\n                                className=\"w-full rounded-xl border-muted bg-muted/10 p-3 text-sm font-medium focus:ring-2 focus:ring-primary/20 min-h-[80px]\"\r\n                                value={filterTexts[key]}\r\n                                onChange={(e) => onUpdateFilterList(key, e.target.value)}\r\n                                placeholder={`Enter ${key} separated by commas...`}\r\n                            />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <div className=\"flex justify-end sticky bottom-0 bg-white/80 backdrop-blur-sm p-4 -mx-4 border-t border-muted/50 mt-8\">\r\n                    <Button onClick={onSaveFilters} className=\"w-full sm:w-auto font-bold px-12 h-14 rounded-2xl shadow-lg\" isLoading={loading}>\r\n                        <Save sx={{ fontSize: 20, marginRight: 1 }} /> Save Filter Config\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"border-t border-muted pt-8\">\r\n                <h3 className=\"text-xl font-bold text-secondary mb-4\">Social Links</h3>\r\n                <div className=\"grid grid-cols-1 gap-4\">\r\n                    <Input label=\"Facebook\" value={socials?.facebook || ''} onChange={e => onUpdateSocials({ ...socials!, facebook: e.target.value })} />\r\n                    <Input label=\"Twitter\" value={socials?.twitter || ''} onChange={e => onUpdateSocials({ ...socials!, twitter: e.target.value })} />\r\n                    <Input label=\"Instagram\" value={socials?.instagram || ''} onChange={e => onUpdateSocials({ ...socials!, instagram: e.target.value })} />\r\n                </div>\r\n                <div className=\"flex justify-end sticky bottom-0 bg-white/80 backdrop-blur-sm p-4 -mx-4 border-t border-muted/50 mt-8\">\r\n                    <Button onClick={onSaveSocials} className=\"w-full sm:w-auto font-bold px-12 h-14 rounded-2xl shadow-lg\" isLoading={loading}>\r\n                        <Save sx={{ fontSize: 20, marginRight: 1 }} /> Save Socials\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"border-t border-muted pt-8\">\r\n                <h3 className=\"text-xl font-bold text-secondary mb-4\">System Maintenance</h3>\r\n                <div className=\"p-6 bg-destructive/5 rounded-2xl border border-destructive/20 space-y-4\">\r\n                    <div>\r\n                        <h4 className=\"font-bold text-destructive mb-1\">Reset Analytics</h4>\r\n                        <p className=\"text-sm text-muted-foreground\">Clear the public visitor counter. This action cannot be undone.</p>\r\n                    </div>\r\n                    <Button\r\n                        onClick={handleResetVisitors}\r\n                        className=\"bg-destructive hover:bg-destructive/90 text-white font-bold px-8 h-12 rounded-xl shadow-lg shadow-destructive/20\"\r\n                        isLoading={loading}\r\n                    >\r\n                        <Lock sx={{ fontSize: 18, marginRight: 1 }} /> Reset Visitor Count\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\admin\\tabs\\DonationManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\admin\\tabs\\UserManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\auth\\AuthForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3191,3194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3191,3194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4448,4451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4448,4451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5174,5177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5174,5177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport {\r\n    GoogleAuthProvider,\r\n    signInWithPopup,\r\n    signOut,\r\n    onAuthStateChanged,\r\n    User,\r\n    signInWithEmailAndPassword,\r\n    createUserWithEmailAndPassword\r\n} from 'firebase/auth'\r\nimport { auth } from '../../lib/firebase'\r\nimport { usersApi } from '../../lib/firebase/users'\r\nimport { configsApi } from '../../lib/firebase/configs'\r\nimport { clsx } from 'clsx'\r\nimport { LogOut, ArrowRight, ShieldCheck, Mail, Lock } from 'lucide-react'\r\nimport { Alert } from '@mui/material'\r\nimport { Button } from '../ui/Button'\r\n\r\nexport function AuthForm() {\r\n    const navigate = useNavigate()\r\n    const [user, setUser] = useState<User | null>(null)\r\n    const [isSystemAdmin, setIsSystemAdmin] = useState(false)\r\n    const [loading, setLoading] = useState(true)\r\n    const [isLogin, setIsLogin] = useState(true)\r\n    const [role, setRole] = useState<'user' | 'admin' | 'super-admin' | null>(null)\r\n\r\n    // Email/Password state\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [authError, setAuthError] = useState<string | null>(null)\r\n\r\n    useEffect(() => {\r\n        setIsSystemAdmin(localStorage.getItem('isSystemAdmin') === 'true')\r\n        const unsubscribe = onAuthStateChanged(auth, async (u) => {\r\n            setUser(u)\r\n            if (u) {\r\n                await usersApi.syncUser(u.uid, u.email!, u.displayName || 'User')\r\n                const r = await usersApi.getUserRole(u.uid)\r\n                setRole(r)\r\n            } else {\r\n                setRole(null)\r\n            }\r\n            setLoading(false)\r\n        })\r\n        return () => unsubscribe()\r\n    }, [])\r\n\r\n    const handleGoogleLogin = async () => {\r\n        const provider = new GoogleAuthProvider()\r\n        try {\r\n            await signInWithPopup(auth, provider)\r\n            navigate('/')\r\n        } catch (err) {\r\n            console.error('Login failed:', err)\r\n        }\r\n    }\r\n\r\n    const handleEmailLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        setAuthError(null)\r\n\r\n        try {\r\n            const adminCreds = await configsApi.getAdminAuth()\r\n            const adminEmail = adminCreds.email || import.meta.env.VITE_ADMIN_EMAIL || 'admin@gmail.com'\r\n            const adminPassword = adminCreds.password || import.meta.env.VITE_ADMIN_PASSWORD || 'adminMPPMS'\r\n\r\n            if (email === adminEmail && password === adminPassword) {\r\n                try {\r\n                    // Try to sign in as the official admin\r\n                    const userCredential = await signInWithEmailAndPassword(auth, email, password)\r\n                    const u = userCredential.user\r\n\r\n                    // Ensure role is admin in Firestore\r\n                    await usersApi.updateUserRole(u.uid, 'admin')\r\n\r\n                    localStorage.setItem('isSystemAdmin', 'true')\r\n                    localStorage.setItem('adminEmail', email)\r\n                    navigate('/admin')\r\n                    return\r\n                } catch (err: any) {\r\n                    console.error(\"Admin Login Error:\", err)\r\n                    if (err.code === 'auth/operation-not-allowed') {\r\n                        setAuthError('Error: \"Email/Password\" sign-in is disabled in your Firebase Console. Please enable it in Authentication > Sign-in method.')\r\n                        setLoading(false)\r\n                        return\r\n                    }\r\n                    if (err.code === 'auth/user-not-found' || err.code === 'auth/invalid-credential') {\r\n                        try {\r\n                            // User doesn't exist in Auth but matches Master Key? Create it!\r\n                            // Note: This requires 'Email/Password' to be enabled in Firebase Console\r\n                            const userCredential = await createUserWithEmailAndPassword(auth, email, password)\r\n                            const u = userCredential.user\r\n\r\n                            await usersApi.updateUserRole(u.uid, 'admin')\r\n                            localStorage.setItem('isSystemAdmin', 'true')\r\n                            localStorage.setItem('adminEmail', email)\r\n                            navigate('/admin')\r\n                            return\r\n                        } catch (createErr: any) {\r\n                            console.error(\"Admin Creation Error:\", createErr)\r\n                            if (createErr.code === 'auth/operation-not-allowed') {\r\n                                setAuthError('Error: \"Email/Password\" sign-in is disabled in your Firebase Console. Please enable it in Authentication > Sign-in method.')\r\n                                setLoading(false)\r\n                                return\r\n                            }\r\n                            throw createErr\r\n                        }\r\n                    }\r\n                    throw err\r\n                }\r\n            }\r\n\r\n            setAuthError('Invalid credentials. Please use Google Sign-in.')\r\n        } catch (err: any) {\r\n            setAuthError(err.message)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleLogout = async () => {\r\n        localStorage.removeItem('isSystemAdmin')\r\n        localStorage.removeItem('adminEmail')\r\n        await signOut(auth)\r\n        navigate('/')\r\n        window.location.reload()\r\n    }\r\n\r\n    if (loading) return (\r\n        <div className=\"flex flex-col items-center justify-center py-20 animate-pulse space-y-4\">\r\n            <div className=\"h-12 w-12 rounded-full bg-primary/20\" />\r\n            <div className=\"h-4 w-32 bg-muted rounded\" />\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center px-6\">\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                className=\"w-full max-w-md bg-card border border-muted rounded-[2.5rem] p-8 shadow-2xl shadow-black/5 space-y-8 relative overflow-hidden\"\r\n            >\r\n                <div className=\"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16 blur-3xl\" />\r\n\r\n                <div className=\"text-center space-y-2 relative z-10\">\r\n                    <h1 className=\"text-3xl font-bold text-secondary\">\r\n                        {(user || isSystemAdmin) ? 'Welcome Back!' : (isLogin ? 'Hello Again!' : 'Join MPPMS')}\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground font-medium text-sm\">\r\n                        {(user || isSystemAdmin)\r\n                            ? `Signed in as ${user?.displayName || 'System Admin'}`\r\n                            : (isLogin ? 'Sign in to access and manage papers' : 'Create an account to contribute')}\r\n                    </p>\r\n                </div>\r\n\r\n                {(!user && !isSystemAdmin) ? (\r\n                    <div className=\"space-y-6 relative z-10\">\r\n                        <div className=\"flex p-1.5 bg-muted/50 rounded-2xl border border-muted\">\r\n                            <button\r\n                                onClick={() => { setIsLogin(true); setAuthError(null); }}\r\n                                className={clsx(\r\n                                    \"flex-1 py-3 rounded-xl text-sm font-bold transition-all duration-300\",\r\n                                    isLogin ? \"bg-white text-primary shadow-lg shadow-black/5\" : \"text-muted-foreground hover:text-foreground\"\r\n                                )}\r\n                            >\r\n                                Login\r\n                            </button>\r\n                            <button\r\n                                onClick={() => { setIsLogin(false); setAuthError(null); }}\r\n                                className={clsx(\r\n                                    \"flex-1 py-3 rounded-xl text-sm font-bold transition-all duration-300\",\r\n                                    !isLogin ? \"bg-white text-primary shadow-lg shadow-black/5\" : \"text-muted-foreground hover:text-foreground\"\r\n                                )}\r\n                            >\r\n                                Sign Up\r\n                            </button>\r\n                        </div>\r\n\r\n                        <AnimatePresence mode=\"wait\">\r\n                            <motion.div\r\n                                key={isLogin ? 'login' : 'signup'}\r\n                                initial={{ opacity: 0, x: isLogin ? -20 : 20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: isLogin ? 20 : -20 }}\r\n                                className=\"space-y-6\"\r\n                            >\r\n                                {isLogin && (\r\n                                    <form onSubmit={handleEmailLogin} className=\"space-y-4\">\r\n                                        <div className=\"space-y-1\">\r\n                                            <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground/60 px-1\">Email Address</label>\r\n                                            <div className=\"relative\">\r\n                                                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\r\n                                                <input\r\n                                                    type=\"email\"\r\n                                                    required\r\n                                                    className=\"w-full h-12 pl-10 pr-4 bg-muted/30 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 outline-none transition-all font-bold text-sm\"\r\n                                                    placeholder=\"admin@gmail.com\"\r\n                                                    value={email}\r\n                                                    onChange={(e) => setEmail(e.target.value)}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-1\">\r\n                                            <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground/60 px-1\">Password</label>\r\n                                            <div className=\"relative\">\r\n                                                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\r\n                                                <input\r\n                                                    type=\"password\"\r\n                                                    required\r\n                                                    className=\"w-full h-12 pl-10 pr-4 bg-muted/30 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 outline-none transition-all font-bold text-sm\"\r\n                                                    placeholder=\"••••••••\"\r\n                                                    value={password}\r\n                                                    onChange={(e) => setPassword(e.target.value)}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {authError && (\r\n                                            <Alert\r\n                                                severity=\"error\"\r\n                                                sx={{ borderRadius: '1rem', fontWeight: 700 }}\r\n                                                className=\"animate-in slide-in-from-top-2\"\r\n                                            >\r\n                                                {authError}\r\n                                            </Alert>\r\n                                        )}\r\n                                        <Button type=\"submit\" className=\"w-full h-14 rounded-2xl font-bold text-lg\">\r\n                                            Sign In\r\n                                            <ArrowRight className=\"ml-2 h-5 w-5\" />\r\n                                        </Button>\r\n                                    </form>\r\n                                )}\r\n\r\n                                <div className=\"relative py-2\">\r\n                                    <div className=\"absolute inset-0 flex items-center\">\r\n                                        <span className=\"w-full border-t border-muted\" />\r\n                                    </div>\r\n                                    <div className=\"relative flex justify-center text-xs uppercase\">\r\n                                        <span className=\"bg-card px-4 text-muted-foreground/50 font-bold\">Or continue with</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"pt-0\">\r\n                                    <Button\r\n                                        onClick={handleGoogleLogin}\r\n                                        className=\"w-full h-14 bg-white hover:bg-slate-100 text-secondary border-2 border-muted hover:border-primary/30 shadow-none text-base font-bold rounded-2xl flex items-center justify-center gap-3 transition-all\"\r\n                                    >\r\n                                        <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\r\n                                            <path d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" fill=\"#4285F4\" />\r\n                                            <path d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" fill=\"#34A853\" />\r\n                                            <path d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z\" fill=\"#FBBC05\" />\r\n                                            <path d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" fill=\"#EA4335\" />\r\n                                        </svg>\r\n                                        Google Account\r\n                                    </Button>\r\n                                </div>\r\n                                <div className=\"text-center text-[10px] font-bold uppercase tracking-widest text-muted-foreground/30 py-4\">\r\n                                    Trusted by Students & Educators\r\n                                </div>\r\n                            </motion.div>\r\n                        </AnimatePresence>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-8 relative z-10\">\r\n                        <div className=\"flex flex-col items-center space-y-6\">\r\n                            <div className=\"relative\">\r\n                                <div className=\"h-24 w-24 rounded-full border-4 border-primary/20 p-1\">\r\n                                    <img\r\n                                        src={user?.photoURL || `https://ui-avatars.com/api/?name=${user?.displayName || 'System Admin'}`}\r\n                                        className=\"h-full w-full rounded-full object-cover shadow-inner\"\r\n                                        alt=\"Profile\"\r\n                                    />\r\n                                </div>\r\n                                {(role === 'admin' || isSystemAdmin) && (\r\n                                    <div className=\"absolute -bottom-1 -right-1 bg-primary text-white p-1.5 rounded-xl shadow-lg border-2 border-white\">\r\n                                        <ShieldCheck size={16} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <h2 className=\"text-2xl font-bold text-foreground\">{user?.displayName || 'System Admin'}</h2>\r\n                                <p className=\"text-sm font-bold text-muted-foreground\">{user?.email || localStorage.getItem('adminEmail')}</p>\r\n                            </div>\r\n                            <div className={clsx(\r\n                                \"px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-widest\",\r\n                                (role === 'admin' || isSystemAdmin) ? \"bg-primary/10 text-primary\" : \"bg-muted text-muted-foreground\"\r\n                            )}>\r\n                                {isSystemAdmin ? 'System Admin' : (role || 'Standard Staff')}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 flex gap-4\">\r\n                            <Button variant=\"secondary\" className=\"flex-1 h-12 font-bold rounded-2xl border-muted\" onClick={handleLogout}>\r\n                                <LogOut size={18} className=\"mr-2\" />\r\n                                Logout\r\n                            </Button>\r\n                            <Button className=\"flex-1 h-12 font-bold rounded-2xl shadow-primary/20\" onClick={() => navigate('/')}>\r\n                                Go Home\r\n                                <ArrowRight size={18} className=\"ml-2\" />\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </motion.div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\auth\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\donation\\CheckoutForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[411,414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[411,414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react'\r\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js'\r\nimport { CreditCard, ShieldCheck } from 'lucide-react'\r\nimport { Button } from '../ui/Button'\r\nimport { Input } from '../ui/Input'\r\nimport { donationsApi } from '../../lib/firebase/donations'\r\n\r\ninterface CheckoutFormProps {\r\n    amount: number;\r\n    coffeeCount: number;\r\n    onSuccess: (details: any) => void;\r\n}\r\n\r\nexport function CheckoutForm({ amount, coffeeCount, onSuccess }: CheckoutFormProps) {\r\n    const stripe = useStripe()\r\n    const elements = useElements()\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState<string | null>(null)\r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n\r\n    const handleSubmit = async (event: React.FormEvent) => {\r\n        event.preventDefault()\r\n        if (!stripe || !elements) return\r\n\r\n        setLoading(true)\r\n        setError(null)\r\n\r\n        const cardElement = elements.getElement(CardElement)\r\n        if (!cardElement) {\r\n            setLoading(false)\r\n            return\r\n        }\r\n\r\n        const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n            type: 'card',\r\n            card: cardElement,\r\n            billing_details: {\r\n                name: name,\r\n                email: email\r\n            }\r\n        })\r\n\r\n        if (error) {\r\n            setError(error.message || 'Payment failed')\r\n            setLoading(false)\r\n        } else {\r\n            console.log('[PaymentMethod]', paymentMethod)\r\n            // Simulated delay for demo\r\n            setTimeout(async () => {\r\n                const contribution = {\r\n                    donorName: name || 'Anonymous',\r\n                    email: email || 'anonymous@example.com',\r\n                    amount: amount,\r\n                    currency: 'usd',\r\n                    status: 'succeeded' as const,\r\n                    coffeeCount: coffeeCount,\r\n                    receiptId: `RCPT-${Math.random().toString(36).substr(2, 9).toUpperCase()}`\r\n                }\r\n\r\n                const id = await donationsApi.addContribution(contribution)\r\n                onSuccess({ ...contribution, id })\r\n                setLoading(false)\r\n            }, 1500)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div className=\"space-y-4\">\r\n                <Input\r\n                    label=\"Full Name\"\r\n                    placeholder=\"John Doe\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    required\r\n                />\r\n                <Input\r\n                    label=\"Email Address\"\r\n                    type=\"email\"\r\n                    placeholder=\"john@example.com\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n                <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground ml-1\">Card Details</label>\r\n                <div className=\"p-4 bg-white/50 border border-muted/50 rounded-xl focus-within:ring-2 focus-within:ring-primary/20 transition-all\">\r\n                    <CardElement options={{\r\n                        style: {\r\n                            base: {\r\n                                fontSize: '16px',\r\n                                color: '#424770',\r\n                                '::placeholder': { color: '#aab7c4' },\r\n                                fontWeight: '500',\r\n                                fontFamily: 'Inter, system-ui, sans-serif'\r\n                            },\r\n                            invalid: { color: '#9e2146' },\r\n                        },\r\n                    }} />\r\n                </div>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"p-4 bg-destructive/10 text-destructive text-sm font-bold rounded-xl animate-in fade-in slide-in-from-top-2\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            <Button\r\n                type=\"submit\"\r\n                disabled={!stripe || loading}\r\n                isLoading={loading}\r\n                className=\"w-full h-14 rounded-2xl font-bold text-lg shadow-xl shadow-primary/20 hover:shadow-primary/30 transition-all active:scale-[0.98]\"\r\n            >\r\n                {loading ? 'Processing...' : `Donate $${amount}`}\r\n                {!loading && <CreditCard className=\"ml-2 h-5 w-5\" />}\r\n            </Button>\r\n\r\n            <div className=\"flex items-center justify-center gap-2 text-xs font-bold text-muted-foreground/60\">\r\n                <ShieldCheck size={14} className=\"text-green-500\" />\r\n                Payments secured by Stripe\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\donation\\DonationPitch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\donation\\DonationSuccess.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[240,243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[240,243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion } from 'framer-motion'\r\nimport { CheckCircle, Download } from 'lucide-react'\r\nimport { Button } from '../ui/Button'\r\nimport { generateReceipt } from '../../lib/receipts'\r\n\r\ninterface DonationSuccessProps {\r\n    successData: any;\r\n}\r\n\r\nexport function DonationSuccess({ successData }: DonationSuccessProps) {\r\n    return (\r\n        <div className=\"min-h-[80vh] flex items-center justify-center pt-20 pb-20 px-4\">\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.9 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                className=\"max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-8 text-center space-y-8 relative overflow-hidden\"\r\n            >\r\n                <div className=\"absolute top-0 inset-x-0 h-2 bg-gradient-to-r from-green-400 to-emerald-500\" />\r\n\r\n                <div className=\"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto text-green-600 shadow-xl shadow-green-200/50\">\r\n                    <CheckCircle size={48} strokeWidth={3} />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <h2 className=\"text-3xl font-bold text-secondary-foreground\">Thank You!</h2>\r\n                    <p className=\"text-muted-foreground font-medium\">\r\n                        Your contribution of <strong className=\"text-green-600\">${successData.amount}</strong> helps us keep the lights on.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"p-6 bg-muted/20 rounded-2xl border border-muted/50 space-y-4\">\r\n                    <div className=\"flex items-center justify-between text-sm font-bold\">\r\n                        <span className=\"text-muted-foreground\">Receipt ID</span>\r\n                        <span className=\"font-mono text-foreground\">{successData.receiptId}</span>\r\n                    </div>\r\n                    <div className=\"border-t border-muted/50\" />\r\n                    <div className=\"flex items-center justify-between text-sm font-bold\">\r\n                        <span className=\"text-muted-foreground\">Date</span>\r\n                        <span className=\"text-foreground\">{new Date().toLocaleDateString()}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                    <Button\r\n                        className=\"w-full h-14 rounded-2xl font-bold shadow-lg bg-secondary text-white hover:bg-secondary/90\"\r\n                        onClick={() => generateReceipt(successData)}\r\n                    >\r\n                        <Download className=\"mr-2 h-5 w-5\" />\r\n                        Download Receipt Again\r\n                    </Button>\r\n                    <Button variant=\"ghost\" className=\"w-full font-bold text-muted-foreground\" onClick={() => window.location.reload()}>\r\n                        Donate Again\r\n                    </Button>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\hero\\Hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\layout\\Footer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[245,248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[245,248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { Facebook, Instagram, Twitter, Loader2 } from 'lucide-react'\r\nimport { configsApi } from '../../lib/firebase/configs'\r\n\r\nexport function Footer() {\r\n    const [socials, setSocials] = useState<any>(null)\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = configsApi.subscribeSocials(setSocials)\r\n        return () => unsubscribe()\r\n    }, [])\r\n\r\n    return (\r\n        <footer className=\"bg-secondary text-secondary-foreground border-t border-white/5 relative z-30\">\r\n            <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-20\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12 items-center\">\r\n                    <div className=\"space-y-6 text-center md:text-left\">\r\n                        <div className=\"flex items-center justify-center md:justify-start gap-3\">\r\n                            <div className=\"p-2 bg-primary rounded-xl text-primary-foreground shadow-lg shadow-primary/20\">\r\n                                <span className=\"font-bold text-xl px-1\">M</span>\r\n                            </div>\r\n                            <span className=\"font-bold text-2xl tracking-tighter text-white\">MPPMS</span>\r\n                        </div>\r\n                        <p className=\"text-secondary-foreground/60 text-sm font-medium max-w-sm leading-relaxed\">\r\n                            The ultimate Meritorious Past Paper Management System for students and educators. Designed for excellence and academic success.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col items-center md:items-end gap-8\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            {socials ? (\r\n                                <>\r\n                                    {socials.twitter && (\r\n                                        <a href={socials.twitter} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 bg-white/5 border border-white/10 rounded-2xl text-secondary-foreground hover:bg-primary hover:text-white transition-all duration-300\">\r\n                                            <Twitter className=\"h-5 w-5\" />\r\n                                        </a>\r\n                                    )}\r\n                                    {socials.instagram && (\r\n                                        <a href={socials.instagram} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 bg-white/5 border border-white/10 rounded-2xl text-secondary-foreground hover:bg-primary hover:text-white transition-all duration-300\">\r\n                                            <Instagram className=\"h-5 w-5\" />\r\n                                        </a>\r\n                                    )}\r\n                                    {socials.facebook && (\r\n                                        <a href={socials.facebook} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 bg-white/5 border border-white/10 rounded-2xl text-secondary-foreground hover:bg-primary hover:text-white transition-all duration-300\">\r\n                                            <Facebook className=\"h-5 w-5\" />\r\n                                        </a>\r\n                                    )}\r\n                                </>\r\n                            ) : (\r\n                                <Loader2 className=\"h-5 w-5 animate-spin text-white/30\" />\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col items-center md:items-end gap-2\">\r\n                            <p className=\"text-[10px] text-secondary-foreground/40 font-bold uppercase tracking-[0.3em]\">\r\n                                © {new Date().getFullYear()} MPPMS Archive • Sri Lanka\r\n                            </p>\r\n                            <div className=\"h-1 w-12 bg-primary rounded-full\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\layout\\Navigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\pages\\About.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1176,1179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1176,1179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3936,3939],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3936,3939],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion } from 'framer-motion'\r\nimport { BookOpen, Shield, Users, Zap, Eye, Heart, Download } from 'lucide-react'\r\nimport { useLanguage } from '../../context/LanguageContext'\r\nimport { useState, useEffect } from 'react'\r\nimport { statsApi, SystemStats } from '../../lib/firebase/stats'\r\nimport { clsx } from 'clsx'\r\n\r\nexport function About() {\r\n    const { t } = useLanguage()\r\n    const [stats, setStats] = useState<SystemStats>({ visitors: 0, contributors: 0, papersEngagement: 0 })\r\n\r\n    useEffect(() => {\r\n        statsApi.getStats().then(setStats)\r\n\r\n        // Smart Visitor Tracking\r\n        const trackVisit = async () => {\r\n            const lastVisit = localStorage.getItem('last_visit_date')\r\n            const today = new Date().toDateString()\r\n\r\n            // Deduplicate: Only increment if they haven't visited today\r\n            if (lastVisit !== today) {\r\n                await statsApi.incrementVisitors()\r\n                localStorage.setItem('last_visit_date', today)\r\n            }\r\n        }\r\n\r\n        trackVisit()\r\n    }, [])\r\n\r\n    const featureIcons = [BookOpen, Zap, Shield, Users]\r\n    const features = (t('about.features') || []).map((f: any, i: number) => ({\r\n        ...f,\r\n        icon: featureIcons[i] || BookOpen\r\n    }))\r\n\r\n    const statsConfig = [\r\n        { label: 'Visitors', value: stats.visitors, icon: Eye, color: 'text-primary', bg: 'bg-primary/10' },\r\n        { label: 'Contributors', value: stats.contributors, icon: Heart, color: 'text-rose-500', bg: 'bg-rose-50' },\r\n        { label: 'Papers Engagement', value: stats.papersEngagement, icon: Download, color: 'text-amber-500', bg: 'bg-amber-50' },\r\n    ]\r\n\r\n    return (\r\n        <div className=\"section-container section-spacing space-y-16 md:space-y-24\">\r\n            {/* Hero Section */}\r\n            <section className=\"text-center space-y-8 max-w-3xl mx-auto\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className=\"space-y-4\"\r\n                >\r\n                    <h1 className=\"text-4xl md:text-5xl font-bold text-foreground leading-tight\">\r\n                        {t('about.hero.title')} <br />\r\n                        <span className=\"text-primary italic\">{t('about.hero.highlight')}</span>\r\n                    </h1>\r\n                    <p className=\"text-xl text-muted-foreground leading-relaxed\">\r\n                        {t('about.hero.description')}\r\n                    </p>\r\n                </motion.div>\r\n            </section>\r\n\r\n            {/* Statistics Section */}\r\n            <section className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                {statsConfig.map((stat, index) => (\r\n                    <motion.div\r\n                        key={stat.label}\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: index * 0.1 }}\r\n                        className=\"bg-card border-none shadow-xl shadow-black/5 rounded-[2.5rem] p-8 text-center space-y-4 hover:scale-[1.02] transition-transform\"\r\n                    >\r\n                        <div className={clsx(\"mx-auto p-4 rounded-2xl w-fit\", stat.bg)}>\r\n                            <stat.icon className={clsx(\"h-8 w-8\", stat.color)} />\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                            <h4 className=\"text-4xl font-bold text-foreground\">{stat.value.toLocaleString()}</h4>\r\n                            <p className=\"text-sm font-bold uppercase tracking-widest text-muted-foreground\">{stat.label}</p>\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </section>\r\n\r\n            {/* Features Grid */}\r\n            <section className=\"grid grid-cols-1 md:grid-cols-2 gap-12\">\r\n                {features.map((feature: any, index: number) => (\r\n                    <motion.div\r\n                        key={feature.title}\r\n                        initial={{ opacity: 0, x: index % 2 === 0 ? -20 : 20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ delay: index * 0.1 }}\r\n                        className=\"flex gap-6 p-8 rounded-[2.5rem] bg-muted/30 border border-transparent hover:border-primary/20 hover:bg-muted/50 transition-all duration-500 group\"\r\n                    >\r\n                        <div className=\"shrink-0\">\r\n                            <div className=\"p-5 bg-primary/10 rounded-2xl group-hover:bg-primary group-hover:text-primary-foreground transition-all duration-500 shadow-inner\">\r\n                                <feature.icon className=\"h-8 w-8 text-primary group-hover:text-primary-foreground transition-colors\" />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            <h3 className=\"text-2xl font-bold text-foreground\">{feature.title}</h3>\r\n                            <p className=\"text-muted-foreground leading-relaxed font-medium\">\r\n                                {feature.description}\r\n                            </p>\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </section>\r\n\r\n            {/* Mission Section */}\r\n            <section className=\"rounded-[3rem] bg-secondary text-secondary-foreground p-12 md:p-20 text-center space-y-8 relative overflow-hidden shadow-2xl shadow-secondary/20\">\r\n                <div className=\"absolute top-0 right-0 w-1/3 h-full bg-white/5 skew-x-12 -z-0\" />\r\n                <div className=\"relative z-10 space-y-8\">\r\n                    <h2 className=\"text-4xl font-bold tracking-tight\">{t('about.mission.title')}</h2>\r\n                    <p className=\"text-xl text-secondary-foreground/80 max-w-2xl mx-auto leading-relaxed font-medium\">\r\n                        {t('about.mission.description')}\r\n                    </p>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\pages\\Admin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\pages\\AdminDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\pages\\Contribute.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[852,855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[852,855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1169,1172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1169,1172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { loadStripe } from '@stripe/stripe-js'\r\nimport { Elements } from '@stripe/react-stripe-js'\r\nimport { CreditCard } from 'lucide-react'\r\nimport { generateReceipt } from '../../lib/receipts'\r\nimport { configsApi } from '../../lib/firebase/configs'\r\nimport { CheckoutForm } from '../donation/CheckoutForm'\r\nimport { DonationPitch } from '../donation/DonationPitch'\r\nimport { DonationSuccess } from '../donation/DonationSuccess'\r\n\r\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLIC_KEY || 'pk_test_TYooMQauvdEDq54NiTphI7jx')\r\n\r\nexport function Contribute() {\r\n    const [coffeePrice, setCoffeePrice] = useState(5)\r\n    const [selectedDetail, setSelectedDetail] = useState(3) \r\n    const [customAmount, setCustomAmount] = useState('')\r\n    const [successData, setSuccessData] = useState<any | null>(null)\r\n\r\n    useEffect(() => {\r\n        const fetchDefaults = async () => {\r\n            const defaults = await configsApi.getDonationSettings()\r\n            if (defaults.coffeePrice) setCoffeePrice(defaults.coffeePrice)\r\n        }\r\n        fetchDefaults()\r\n    }, [])\r\n\r\n    const handleSuccess = (data: any) => {\r\n        setSuccessData(data)\r\n        generateReceipt(data)\r\n    }\r\n\r\n    const currentAmount = customAmount ? parseFloat(customAmount) : (selectedDetail * coffeePrice)\r\n\r\n    if (successData) {\r\n        return <DonationSuccess successData={successData} />\r\n    }\r\n\r\n    return (\r\n        <div className=\"section-container page-header-padding pb-20\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start\">\r\n                <DonationPitch\r\n                    coffeePrice={coffeePrice}\r\n                    selectedDetail={selectedDetail}\r\n                    setSelectedDetail={setSelectedDetail}\r\n                    customAmount={customAmount}\r\n                    setCustomAmount={setCustomAmount}\r\n                />\r\n\r\n                {/* Right Side: Payment Form */}\r\n                <div className=\"bg-white rounded-[2.5rem] shadow-xl border border-muted/50 p-8 lg:p-10 relative overflow-hidden\">\r\n                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none\" />\r\n\r\n                    <div className=\"mb-8 flex items-center justify-between\">\r\n                        <h3 className=\"text-2xl font-bold text-secondary flex items-center gap-3\">\r\n                            <CreditCard className=\"text-primary\" />\r\n                            Payment Details\r\n                        </h3>\r\n                        <div className=\"text-right\">\r\n                            <p className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground\">Total to pay</p>\r\n                            <p className=\"text-2xl font-bold text-secondary\">${currentAmount.toFixed(2)}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Elements stripe={stripePromise} options={{\r\n                        appearance: {\r\n                            theme: 'stripe',\r\n                            variables: {\r\n                                colorPrimary: '#3b82f6',\r\n                                borderRadius: '12px',\r\n                                fontFamily: 'Inter, system-ui, sans-serif'\r\n                            }\r\n                        }\r\n                    }}>\r\n                        <CheckoutForm\r\n                            amount={currentAmount}\r\n                            coffeeCount={selectedDetail || 1}\r\n                            onSuccess={handleSuccess}\r\n                        />\r\n                    </Elements>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\papers\\AddPaperForm.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'examType', 'language', 'part', and 'year'. Either include them or remove the dependency array.","line":46,"column":8,"nodeType":"ArrayExpression","endLine":46,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [dynamicFilters, examType, language, paperToEdit, part, year]","fix":{"range":[2327,2356],"text":"[dynamicFilters, examType, language, paperToEdit, part, year]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2399,2402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2399,2402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5426,5429],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5426,5429],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { useNavigate, useLocation } from 'react-router-dom'\r\nimport { papersApi } from '../../lib/firebase/papers'\r\nimport { Card } from '../ui/Card'\r\nimport { Button } from '../ui/Button'\r\nimport { useLanguage } from '../../context/LanguageContext'\r\nimport { useFilters } from '../../context/FilterContext'\r\nimport { FileText, Save, ArrowLeft } from 'lucide-react'\r\nimport { Paper } from '../../lib/firebase/schema'\r\nimport { Snackbar, Alert } from '@mui/material'\r\nimport { auth } from '../../lib/firebase'\r\nimport { FileUploadSection } from './form/FileUploadSection'\r\nimport { PaperFormFields } from './form/PaperFormFields'\r\n\r\nexport function AddPaperForm() {\r\n    const { t } = useLanguage()\r\n    const { filters: dynamicFilters } = useFilters()\r\n    const navigate = useNavigate()\r\n    const location = useLocation()\r\n    const paperToEdit = location.state?.paperToEdit as Paper | undefined\r\n\r\n    // Form State\r\n    const [file, setFile] = useState<File | null>(null)\r\n    const [title, setTitle] = useState(paperToEdit?.title || '')\r\n    const [subject, setSubject] = useState(paperToEdit?.subject || '')\r\n    const [year, setYear] = useState(paperToEdit?.year?.toString() || '')\r\n    const [examType, setExamType] = useState(paperToEdit?.examType || '')\r\n    const [part, setPart] = useState(paperToEdit?.part || '')\r\n    const [language, setLanguage] = useState(paperToEdit?.language || 'English')\r\n\r\n    const [loading, setLoading] = useState(false)\r\n    const [changingFile, setChangingFile] = useState(false)\r\n    const [feedback, setFeedback] = useState<{ open: boolean, message: string, severity: 'success' | 'error' }>({\r\n        open: false, message: '', severity: 'success'\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (dynamicFilters && !paperToEdit) {\r\n            if (!language && dynamicFilters.languages?.length > 0) setLanguage(dynamicFilters.languages[0])\r\n            if (!examType && dynamicFilters.categories?.length > 0) setExamType(dynamicFilters.categories[0])\r\n            if (!part && dynamicFilters.parts?.length > 0) setPart(dynamicFilters.parts[0])\r\n            if (year && dynamicFilters.years?.length > 0 && !dynamicFilters.years.includes(year.toString())) {\r\n                setYear(dynamicFilters.years[0])\r\n            }\r\n        }\r\n    }, [dynamicFilters, paperToEdit])\r\n\r\n    const handleAutoFill = (metadata: any) => {\r\n        if (metadata.title) setTitle(metadata.title)\r\n        if (metadata.subject) setSubject(metadata.subject)\r\n        if (metadata.year) setYear(metadata.year.toString())\r\n        if (metadata.examType) setExamType(metadata.examType)\r\n        if (metadata.part) setPart(metadata.part)\r\n        if (metadata.language) setLanguage(metadata.language)\r\n    }\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if ((!file && !paperToEdit) || !title || !subject || !examType) {\r\n            setFeedback({ open: true, message: 'Please fill in all required fields.', severity: 'error' })\r\n            return\r\n        }\r\n\r\n        const currentUser = auth.currentUser\r\n        const isSystemAdmin = localStorage.getItem('isSystemAdmin') === 'true'\r\n\r\n        if (!currentUser && !isSystemAdmin) {\r\n            setFeedback({ open: true, message: 'You must be logged in.', severity: 'error' })\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n        try {\r\n            if (paperToEdit) {\r\n                const updates: Partial<Paper> = {\r\n                    title: title.trim(),\r\n                    subject,\r\n                    year: parseInt(year),\r\n                    examType,\r\n                    part,\r\n                    language\r\n                }\r\n\r\n                if (file && changingFile) {\r\n                    const uploadResult = await papersApi.uploadFile(file, {\r\n                        uid: currentUser?.uid || 'system-admin',\r\n                        displayName: currentUser?.displayName || 'System Admin'\r\n                    })\r\n                    updates.fileUrl = uploadResult.url\r\n                    updates.metadata = uploadResult.metadata\r\n                }\r\n\r\n                await papersApi.updatePaper(paperToEdit.id!, updates)\r\n                setFeedback({ open: true, message: 'Paper updated successfully!', severity: 'success' })\r\n                setTimeout(() => navigate('/admin'), 1500)\r\n            } else {\r\n                if (file) {\r\n                    const exists = await papersApi.checkPaperExists(file.name)\r\n                    if (exists) {\r\n                        setFeedback({ open: true, message: 'A file with this name already exists.', severity: 'error' })\r\n                        setLoading(false)\r\n                        return\r\n                    }\r\n\r\n                    await papersApi.uploadPaper(\r\n                        file,\r\n                        { title, subject, year: parseInt(year), examType, part, language },\r\n                        {\r\n                            uid: currentUser?.uid || 'system-admin',\r\n                            displayName: currentUser?.displayName || 'System Admin'\r\n                        }\r\n                    )\r\n                    setFeedback({ open: true, message: t('addPaper.form.alerts.saveSuccess'), severity: 'success' })\r\n                    setTimeout(() => navigate('/admin'), 1500)\r\n                }\r\n            }\r\n        } catch (err: any) {\r\n            console.error(err)\r\n            setFeedback({ open: true, message: err.message || 'Operation failed', severity: 'error' })\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 min-w-0 pb-20\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center gap-4\">\r\n                <Button\r\n                    variant=\"secondary\"\r\n                    onClick={() => navigate('/admin')}\r\n                    className=\"h-12 w-12 rounded-full p-0 flex items-center justify-center bg-white shadow-sm hover:bg-slate-50\"\r\n                >\r\n                    <ArrowLeft size={20} />\r\n                </Button>\r\n                <div>\r\n                    <h1 className=\"text-2xl sm:text-3xl font-bold text-secondary tracking-tight\">\r\n                        {paperToEdit ? 'Edit Paper' : 'Add New Paper'}\r\n                    </h1>\r\n                    <p className=\"text-sm sm:text-base text-muted-foreground font-medium\">\r\n                        {paperToEdit ? 'Update existing paper details' : 'Upload and catalogue a new past paper'}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <Card className=\"p-4 sm:p-8 overflow-hidden max-w-4xl mx-auto shadow-2xl\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-10\">\r\n                    {/* Currently Editing Info */}\r\n                    {paperToEdit && (\r\n                        <div className=\"bg-primary/5 border-2 border-primary/20 rounded-3xl p-4 sm:p-6 space-y-4 shadow-inner\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-primary rounded-lg text-primary-foreground\">\r\n                                    <FileText size={20} />\r\n                                </div>\r\n                                <h3 className=\"font-bold text-lg text-secondary\">Currently Editing Reference</h3>\r\n                            </div>\r\n                            {!changingFile ? (\r\n                                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 pt-2\">\r\n                                    <div className=\"min-w-0\">\r\n                                        <p className=\"text-sm font-bold text-foreground\">Current File</p>\r\n                                        <p className=\"text-xs text-muted-foreground truncate\">{paperToEdit.metadata?.originalName}</p>\r\n                                    </div>\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"secondary\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => setChangingFile(true)}\r\n                                        className=\"font-bold px-6 rounded-xl\"\r\n                                    >\r\n                                        Change PDF\r\n                                    </Button>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 pt-2\">\r\n                                    <p className=\"text-xs text-amber-600 font-bold italic\">⚠️ Choose a replacement PDF below</p>\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"ghost\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => { setChangingFile(false); setFile(null); }}\r\n                                        className=\"font-bold text-muted-foreground rounded-xl\"\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* File Upload Section */}\r\n                    {(!paperToEdit || changingFile) && (\r\n                        <FileUploadSection\r\n                            file={file}\r\n                            onFileChange={setFile}\r\n                            onAutoFill={handleAutoFill}\r\n                            onSnackbar={(message, severity) => setFeedback({ open: true, message, severity })}\r\n                            required={!paperToEdit}\r\n                        />\r\n                    )}\r\n\r\n                    <PaperFormFields\r\n                        title={title} setTitle={setTitle}\r\n                        subject={subject} setSubject={setSubject}\r\n                        year={year} setYear={setYear}\r\n                        examType={examType} setExamType={setExamType}\r\n                        part={part} setPart={setPart}\r\n                        language={language} setLanguage={setLanguage}\r\n                        dynamicFilters={dynamicFilters}\r\n                        t={t}\r\n                    />\r\n\r\n                    <Button type=\"submit\" className=\"w-full h-16 rounded-2xl font-bold text-lg shadow-2xl shadow-primary/20 hover:-translate-y-1 transition-all\" isLoading={loading}>\r\n                        <Save className=\"mr-3\" />\r\n                        {paperToEdit ? 'Update Paper' : 'Publish Paper'}\r\n                    </Button>\r\n                </form>\r\n            </Card>\r\n\r\n            <Snackbar\r\n                open={feedback.open}\r\n                autoHideDuration={6000}\r\n                onClose={() => setFeedback({ ...feedback, open: false })}\r\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n            >\r\n                <Alert\r\n                    onClose={() => setFeedback({ ...feedback, open: false })}\r\n                    severity={feedback.severity}\r\n                    sx={{ width: '100%', borderRadius: '1rem', fontWeight: 700 }}\r\n                >\r\n                    {feedback.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\papers\\FilterBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[334,337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[334,337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'onFilterChange'. Either include it or remove the dependency array. If 'onFilterChange' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":27,"column":8,"nodeType":"ArrayExpression","endLine":27,"endColumn":62,"suggestions":[{"desc":"Update the dependencies array to be: [searchQuery, subject, year, examType, part, language, onFilterChange]","fix":{"range":[1049,1103],"text":"[searchQuery, subject, year, examType, part, language, onFilterChange]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Plus, Search, Filter, X, ChevronDown } from 'lucide-react'\r\nimport { useLanguage } from '../../context/LanguageContext'\r\nimport { useFilters } from '../../context/FilterContext'\r\n\r\ninterface FilterBarProps {\r\n    onFilterChange: (filters: any) => void\r\n}\r\n\r\nexport function FilterBar({ onFilterChange }: FilterBarProps) {\r\n    const { t } = useLanguage()\r\n    const { filters } = useFilters()\r\n    const [subject, setSubject] = useState('')\r\n    const [year, setYear] = useState('')\r\n    const [examType, setExamType] = useState('')\r\n    const [part, setPart] = useState('')\r\n    const [language, setLanguage] = useState('')\r\n    const [searchQuery, setSearchQuery] = useState('')\r\n\r\n    // Real-time filtering with debounce for search\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            onFilterChange({ searchQuery, subject, year, examType, part, language })\r\n        }, 300)\r\n        return () => clearTimeout(timer)\r\n    }, [searchQuery, subject, year, examType, part, language])\r\n\r\n    const handleSearch = (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n    }\r\n\r\n    const resetFilters = () => {\r\n        setSearchQuery('')\r\n        setSubject('')\r\n        setYear('')\r\n        setExamType('')\r\n        setPart('')\r\n        setLanguage('')\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full space-y-6 mt-6\">\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center justify-between gap-6\">\r\n                <div className=\"flex items-center justify-between w-full lg:w-auto\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Filter className=\"h-4 w-4 text-primary\" />\r\n                        <h2 className=\"text-xs sm:text-sm font-bold uppercase tracking-widest text-foreground/60\">\r\n                            {t('filters.title')}\r\n                        </h2>\r\n                    </div>\r\n\r\n                    <Link\r\n                        to=\"/add-paper\"\r\n                        className=\"lg:hidden flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-xl font-bold text-xs shadow-lg shadow-primary/20\"\r\n                    >\r\n                        <Plus size={14} />\r\n                        {t('addPaper.title.add')}\r\n                    </Link>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 flex-1 max-w-2xl w-full\">\r\n                    <div className=\"relative group flex-1\">\r\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder={t('filters.search')}\r\n                            className=\"w-full h-14 pl-12 pr-4 bg-muted/30 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 outline-none transition-all font-bold text-sm\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    <Link\r\n                        to=\"/add-paper\"\r\n                        className=\"hidden lg:flex items-center gap-2 px-6 h-14 bg-primary text-primary-foreground rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all whitespace-nowrap\"\r\n                    >\r\n                        <Plus size={18} />\r\n                        {t('addPaper.title.add')} {t('addPaper.title.highlight')}\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"bg-card border border-muted rounded-[2rem] p-6 lg:p-8 shadow-xl shadow-black/5\">\r\n                <form onSubmit={handleSearch} className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 items-center\">\r\n                    {/* Subject Filter */}\r\n                    <div className=\"relative group\">\r\n                        <select\r\n                            value={subject}\r\n                            onChange={(e) => setSubject(e.target.value)}\r\n                            className=\"w-full h-12 pl-4 pr-10 bg-muted/50 border border-transparent rounded-xl focus:bg-white focus:border-primary/30 outline-none transition-all font-bold text-xs sm:text-sm appearance-none cursor-pointer truncate\"\r\n                        >\r\n                            <option value=\"\">{t('filters.placeholders.subject')}</option>\r\n                            {(filters?.subjects || []).slice().sort().map(s => (\r\n                                <option key={s} value={s}>{s}</option>\r\n                            ))}\r\n                        </select>\r\n                        <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-focus-within:rotate-180 transition-transform\" />\r\n                    </div>\r\n\r\n                    {/* Year Filter */}\r\n                    <div className=\"relative group\">\r\n                        <select\r\n                            value={year}\r\n                            onChange={(e) => setYear(e.target.value)}\r\n                            className=\"w-full h-12 pl-4 pr-10 bg-muted/50 border border-transparent rounded-xl focus:bg-white focus:border-primary/30 outline-none transition-all font-bold text-xs sm:text-sm appearance-none cursor-pointer truncate\"\r\n                        >\r\n                            <option value=\"\">{t('filters.placeholders.year')}</option>\r\n                            {(filters?.years || []).slice().sort((a, b) => parseInt(b) - parseInt(a)).map((y) => (\r\n                                <option key={y} value={y} className=\"truncate\">\r\n                                    {y}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                        <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-focus-within:rotate-180 transition-transform\" />\r\n                    </div>\r\n\r\n                    {/* Category Filter */}\r\n                    <div className=\"relative group\">\r\n                        <select\r\n                            value={examType}\r\n                            onChange={(e) => setExamType(e.target.value)}\r\n                            className=\"w-full h-12 pl-4 pr-10 bg-muted/50 border border-transparent rounded-xl focus:bg-white focus:border-primary/30 outline-none transition-all font-bold text-xs sm:text-sm appearance-none cursor-pointer truncate\"\r\n                        >\r\n                            <option value=\"\">{t('filters.placeholders.category')}</option>\r\n                            {(filters?.categories || []).map(c => (\r\n                                <option key={c} value={c}>{c}</option>\r\n                            ))}\r\n                        </select>\r\n                        <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-focus-within:rotate-180 transition-transform\" />\r\n                    </div>\r\n\r\n                    {/* Part Filter */}\r\n                    <div className=\"relative group\">\r\n                        <select\r\n                            value={part}\r\n                            onChange={(e) => setPart(e.target.value)}\r\n                            className=\"w-full h-12 pl-4 pr-10 bg-muted/50 border border-transparent rounded-xl focus:bg-white focus:border-primary/30 outline-none transition-all font-bold text-xs sm:text-sm appearance-none cursor-pointer truncate\"\r\n                        >\r\n                            <option value=\"\">{t('filters.placeholders.part')}</option>\r\n                            {(filters?.parts || []).map(p => (\r\n                                <option key={p} value={p}>{p}</option>\r\n                            ))}\r\n                        </select>\r\n                        <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-focus-within:rotate-180 transition-transform\" />\r\n                    </div>\r\n\r\n                    {/* Language Filter */}\r\n                    <div className=\"relative group\">\r\n                        <select\r\n                            value={language}\r\n                            onChange={(e) => setLanguage(e.target.value)}\r\n                            className=\"w-full h-12 pl-4 pr-10 bg-muted/50 border border-transparent rounded-xl focus:bg-white focus:border-primary/30 outline-none transition-all font-bold text-xs sm:text-sm appearance-none cursor-pointer truncate\"\r\n                        >\r\n                            <option value=\"\">Language</option>\r\n                            {(filters?.languages || []).map(l => (\r\n                                <option key={l} value={l}>{l}</option>\r\n                            ))}\r\n                        </select>\r\n                        <ChevronDown className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-focus-within:rotate-180 transition-transform\" />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2 lg:col-span-1 justify-end\">\r\n                        {(subject || year || examType || part || language || searchQuery) && (\r\n                            <button\r\n                                onClick={resetFilters}\r\n                                type=\"button\"\r\n                                className=\"h-12 px-6 flex items-center justify-center gap-2 bg-destructive/5 text-destructive hover:bg-destructive/10 rounded-xl transition-all font-bold text-sm\"\r\n                                title={t('filters.reset')}\r\n                            >\r\n                                <X className=\"h-5 w-5\" />\r\n                                {t('filters.reset')}\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\papers\\PaperCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\papers\\PaperGrid.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchPapers'. Either include it or remove the dependency array.","line":56,"column":8,"nodeType":"ArrayExpression","endLine":56,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchPapers, filters]","fix":{"range":[2067,2076],"text":"[fetchPapers, filters]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\r\nimport { papersApi } from '../../lib/firebase/papers'\r\nimport { Paper } from '../../lib/firebase/schema'\r\nimport { PaperCard } from './PaperCard'\r\nimport { FilterBar } from './FilterBar'\r\nimport { Pagination } from '../ui/Pagination'\r\nimport { useLanguage } from '../../context/LanguageContext'\r\nimport { BookOpen, X, Download } from 'lucide-react'\r\nimport { Dialog, DialogTitle, DialogContent, IconButton } from '@mui/material'\r\n\r\nexport function PaperGrid() {\r\n    const { t } = useLanguage()\r\n    const [papers, setPapers] = useState<Paper[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [selectedPaper, setSelectedPaper] = useState<Paper | null>(null)\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const itemsPerPage = 10\r\n\r\n    const [filters, setFilters] = useState({\r\n        subject: '',\r\n        year: '',\r\n        examType: '',\r\n        part: '',\r\n        language: '',\r\n        searchQuery: ''\r\n    })\r\n\r\n    const fetchPapers = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const data = await papersApi.getPapers({\r\n                subject: filters.subject,\r\n                year: filters.year ? parseInt(filters.year) : undefined,\r\n                examType: filters.examType,\r\n                part: filters.part,\r\n                language: filters.language,\r\n                searchQuery: filters.searchQuery\r\n            })\r\n            // Sort by creation date descending\r\n            const sorted = data.sort((a, b) => {\r\n                const dateA = a.createdAt?.toDate?.() || new Date(a.createdAt)\r\n                const dateB = b.createdAt?.toDate?.() || new Date(b.createdAt)\r\n                return dateB - dateA\r\n            })\r\n            setPapers(sorted)\r\n            setCurrentPage(1) // Reset to first page on filter change\r\n        } catch (error) {\r\n            console.error('Failed to fetch papers:', error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchPapers()\r\n    }, [filters])\r\n\r\n    // Pagination logic\r\n    const indexOfLastItem = currentPage * itemsPerPage\r\n    const indexOfFirstItem = indexOfLastItem - itemsPerPage\r\n    const currentPapers = papers.slice(indexOfFirstItem, indexOfLastItem)\r\n    const totalPages = Math.ceil(papers.length / itemsPerPage)\r\n\r\n    return (\r\n        <div className=\"space-y-12\">\r\n            <FilterBar onFilterChange={setFilters} />\r\n\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3\">\r\n                    {[...Array(6)].map((_, i) => (\r\n                        <div key={i} className=\"h-[400px] animate-pulse rounded-[2.5rem] bg-muted/50\" />\r\n                    ))}\r\n                </div>\r\n            ) : currentPapers.length > 0 ? (\r\n                <>\r\n                    <div className=\"grid grid-cols-1 gap-10 sm:grid-cols-2 lg:grid-cols-3\">\r\n                        {currentPapers.map((paper) => (\r\n                            <PaperCard\r\n                                key={paper.id}\r\n                                paper={paper}\r\n                                onView={(p) => setSelectedPaper(p)}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n\r\n                    <Pagination\r\n                        currentPage={currentPage}\r\n                        totalPages={totalPages}\r\n                        onPageChange={setCurrentPage}\r\n                    />\r\n                </>\r\n            ) : (\r\n                <div className=\"flex flex-col items-center justify-center py-24 text-center space-y-4 bg-muted/10 rounded-3xl border-2 border-dashed border-muted/30\">\r\n                    <div className=\"p-4 bg-muted rounded-full\">\r\n                        <BookOpen className=\"h-10 w-10 text-muted-foreground\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-2xl font-bold text-secondary-foreground\">{t('papers.empty.title')}</h3>\r\n                        <p className=\"text-muted-foreground font-medium max-w-sm mx-auto\">{t('papers.empty.description')}</p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n            <Dialog\r\n                open={!!selectedPaper}\r\n                onClose={() => setSelectedPaper(null)}\r\n                maxWidth=\"lg\"\r\n                fullWidth\r\n                PaperProps={{\r\n                    sx: {\r\n                        borderRadius: '2rem',\r\n                        bgcolor: 'var(--color-card)',\r\n                        backgroundImage: 'none',\r\n                        boxShadow: '0 25px 50px -12px rgb(0 0 0 / 0.1)'\r\n                    }\r\n                }}\r\n            >\r\n                <DialogTitle sx={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    p: 3,\r\n                    pb: 1,\r\n                    fontFamily: 'inherit',\r\n                    fontWeight: 700,\r\n                    color: 'var(--color-secondary)'\r\n                }}>\r\n                    <span className=\"flex items-center gap-2\">\r\n                        <BookOpen className=\"h-5 w-5 text-primary\" />\r\n                        {selectedPaper?.title}\r\n                    </span>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {selectedPaper && (\r\n                            <a\r\n                                href={selectedPaper.fileUrl}\r\n                                target=\"_blank\"\r\n                                rel=\"noreferrer\"\r\n                                className=\"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-xl text-sm font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform\"\r\n                            >\r\n                                <Download size={16} />\r\n                                Download PDF\r\n                            </a>\r\n                        )}\r\n                        <IconButton\r\n                            onClick={() => setSelectedPaper(null)}\r\n                            size=\"small\"\r\n                            sx={{\r\n                                color: 'var(--color-muted-foreground)',\r\n                                bgcolor: 'var(--color-muted)',\r\n                                p: 1,\r\n                                borderRadius: '12px',\r\n                                '&:hover': { bgcolor: 'var(--color-destructive)', color: 'white' }\r\n                            }}\r\n                        >\r\n                            <X size={20} />\r\n                        </IconButton>\r\n                    </div>\r\n                </DialogTitle>\r\n                <DialogContent sx={{ p: '0 24px 24px 24px', height: '80vh' }}>\r\n                    {selectedPaper && (\r\n                        <iframe\r\n                            src={selectedPaper.fileUrl}\r\n                            className=\"h-full w-full rounded-2xl border border-muted shadow-inner\"\r\n                            title=\"PDF Viewer\"\r\n                        />\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\papers\\form\\FileUploadSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[400,403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[400,403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Upload, FileText, Sparkles, Loader2 } from 'lucide-react'\r\nimport { Button } from '../../ui/Button'\r\nimport { clsx } from 'clsx'\r\nimport { extractTextFromPDF, analyzePaperWithAI } from '../../../lib/utils/ai-extractor'\r\nimport { useState } from 'react'\r\n\r\ninterface FileUploadSectionProps {\r\n    file: File | null;\r\n    onFileChange: (file: File | null) => void;\r\n    onAutoFill: (metadata: any) => void;\r\n    onSnackbar: (message: string, severity: 'success' | 'error') => void;\r\n    required?: boolean;\r\n}\r\n\r\nexport function FileUploadSection({ file, onFileChange, onAutoFill, onSnackbar, required }: FileUploadSectionProps) {\r\n    const [aiLoading, setAiLoading] = useState(false)\r\n\r\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files?.[0]) {\r\n            const selectedFile = e.target.files[0]\r\n            if (selectedFile.type !== 'application/pdf') {\r\n                onSnackbar('Only PDF files are allowed.', 'error')\r\n                return\r\n            }\r\n            onFileChange(selectedFile)\r\n        }\r\n    }\r\n\r\n    const handleAIAutoFill = async () => {\r\n        if (!file) return\r\n        setAiLoading(true)\r\n        try {\r\n            const text = await extractTextFromPDF(file)\r\n            const metadata = await analyzePaperWithAI(text)\r\n            onAutoFill(metadata)\r\n            onSnackbar('AI Analysis complete!', 'success')\r\n        } catch (err) {\r\n            console.error(err)\r\n            onSnackbar('AI failed to analyze this PDF. Manual entry required.', 'error')\r\n        } finally {\r\n            setAiLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative group\">\r\n            <div className={clsx(\r\n                \"flex h-48 w-full flex-col items-center justify-center rounded-[2.5rem] border-4 border-dashed transition-all\",\r\n                file ? \"border-primary/40 bg-primary/5\" : \"border-muted/30 bg-muted/5 group-hover:border-primary/40 group-hover:bg-primary/5\"\r\n            )}>\r\n                <input\r\n                    type=\"file\"\r\n                    accept=\".pdf\"\r\n                    onChange={handleFileSelect}\r\n                    className=\"absolute inset-0 cursor-pointer opacity-0 z-10\"\r\n                    required={required}\r\n                />\r\n                {file ? (\r\n                    <div className=\"flex flex-col items-center gap-4 text-primary text-center px-6 w-full z-20\">\r\n                        <div className=\"p-4 bg-primary rounded-2xl text-white\">\r\n                            <FileText size={36} />\r\n                        </div>\r\n                        <div className=\"min-w-0 max-w-full\">\r\n                            <span className=\"font-bold text-lg block truncate\">{file.name}</span>\r\n                            <div className=\"flex items-center justify-center gap-3 mt-2\">\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    onClick={handleAIAutoFill}\r\n                                    disabled={aiLoading}\r\n                                    className=\"bg-secondary text-secondary-foreground h-10 px-4 rounded-xl flex items-center gap-2 group transition-all\"\r\n                                >\r\n                                    {aiLoading ? (\r\n                                        <Loader2 size={18} className=\"animate-spin\" />\r\n                                    ) : (\r\n                                        <Sparkles size={18} className=\"group-hover:rotate-12 transition-transform\" />\r\n                                    )}\r\n                                    <span className=\"font-bold text-xs uppercase tracking-widest\">\r\n                                        {aiLoading ? 'Analyzing...' : 'Auto-fill with AI'}\r\n                                    </span>\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    variant=\"ghost\"\r\n                                    onClick={() => onFileChange(null)}\r\n                                    className=\"text-destructive h-10 px-4 rounded-xl font-bold text-xs uppercase\"\r\n                                >\r\n                                    Discard\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex flex-col items-center gap-4 text-muted-foreground group-hover:text-primary transition-colors text-center\">\r\n                        <div className=\"p-4 bg-card rounded-2xl shadow-xl border border-muted group-hover:border-primary/30 transition-all\">\r\n                            <Upload size={32} />\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                            <span className=\"font-bold text-lg block\">Click or Drag PDF to Upload</span>\r\n                            <span className=\"font-bold text-xs text-muted-foreground/60 italic uppercase tracking-widest\">Max 50MB</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\papers\\form\\PaperFormFields.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[485,488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[485,488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Input } from '../../ui/Input'\r\nimport { clsx } from 'clsx'\r\n\r\ninterface PaperFormFieldsProps {\r\n    title: string;\r\n    setTitle: (val: string) => void;\r\n    subject: string;\r\n    setSubject: (val: string) => void;\r\n    year: string;\r\n    setYear: (val: string) => void;\r\n    examType: string;\r\n    setExamType: (val: string) => void;\r\n    part: string;\r\n    setPart: (val: string) => void;\r\n    language: string;\r\n    setLanguage: (val: string) => void;\r\n    dynamicFilters: any;\r\n    t: (key: string) => string;\r\n}\r\n\r\nexport function PaperFormFields({\r\n    title, setTitle,\r\n    subject, setSubject,\r\n    year, setYear,\r\n    examType, setExamType,\r\n    part, setPart,\r\n    language, setLanguage,\r\n    dynamicFilters,\r\n    t\r\n}: PaperFormFieldsProps) {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"space-y-6\">\r\n                <Input\r\n                    label={t('addPaper.form.name')}\r\n                    placeholder={t('addPaper.form.placeholder.name')}\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    required\r\n                />\r\n\r\n                <div className=\"space-y-2\">\r\n                    <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground/60 px-1\">{t('addPaper.form.subject')}</label>\r\n                    <select\r\n                        className=\"h-12 w-full rounded-2xl border-none bg-muted/30 px-4 text-sm font-bold focus:ring-2 focus:ring-primary/20 outline-none transition-all appearance-none cursor-pointer\"\r\n                        value={subject}\r\n                        onChange={(e) => setSubject(e.target.value)}\r\n                        required\r\n                    >\r\n                        <option value=\"\">{t('addPaper.form.placeholder.subject')}</option>\r\n                        {((dynamicFilters?.subjects as string[]) || []).slice().sort().map(s => (\r\n                            <option key={s} value={s}>{s}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"space-y-2\">\r\n                    <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground/60\">{t('addPaper.form.year')}</label>\r\n                    <select\r\n                        className=\"h-12 w-full rounded-2xl border-none bg-muted/30 px-4 text-sm font-bold focus:ring-2 focus:ring-primary/20 outline-none transition-all cursor-pointer\"\r\n                        value={year}\r\n                        onChange={(e) => setYear(e.target.value)}\r\n                        required\r\n                    >\r\n                        <option value=\"\">Select Year</option>\r\n                        {((dynamicFilters?.years as string[]) || []).slice().sort((a, b) => parseInt(b) - parseInt(a)).map(y => (\r\n                            <option key={y} value={y}>{y}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground/60\">{t('addPaper.form.category')}</label>\r\n                    <select\r\n                        className=\"h-12 w-full rounded-2xl border-none bg-muted/30 px-4 text-sm font-bold focus:ring-2 focus:ring-primary/20 outline-none transition-all cursor-pointer\"\r\n                        value={examType}\r\n                        onChange={(e) => setExamType(e.target.value)}\r\n                        required\r\n                    >\r\n                        <option value=\"\">Select Category</option>\r\n                        {((dynamicFilters?.categories as string[]) || []).map(c => (\r\n                            <option key={c} value={c}>{c}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"space-y-2\">\r\n                    <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground/60\">Part / Component</label>\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        {((dynamicFilters?.parts as string[]) || []).map(p => (\r\n                            <button\r\n                                key={p}\r\n                                type=\"button\"\r\n                                onClick={() => setPart(p)}\r\n                                className={clsx(\r\n                                    \"py-3 px-2 rounded-xl text-xs font-bold transition-all border-2\",\r\n                                    part === p ? \"bg-primary border-primary text-primary-foreground shadow-lg shadow-primary/20\" : \"bg-muted/30 border-transparent text-muted-foreground hover:bg-muted/50\"\r\n                                )}\r\n                            >\r\n                                {p}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <label className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground/60\">Language</label>\r\n                    <select\r\n                        className=\"h-12 w-full rounded-2xl border-none bg-muted/30 px-4 text-sm font-bold focus:ring-2 focus:ring-primary/20 outline-none transition-all cursor-pointer\"\r\n                        value={language}\r\n                        onChange={(e) => setLanguage(e.target.value)}\r\n                        required\r\n                    >\r\n                        <option value=\"\">Select Language</option>\r\n                        {((dynamicFilters?.languages as string[]) || []).map(l => (\r\n                            <option key={l} value={l}>{l}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\ErrorPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\LoadingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\components\\ui\\Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\context\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":52,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":52,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { onAuthStateChanged, User } from 'firebase/auth';\r\nimport { auth } from '../lib/firebase';\r\nimport { usersApi } from '../lib/firebase/users';\r\nimport { UserProfile } from '../lib/firebase/schema';\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    profile: UserProfile | null;\r\n    loading: boolean;\r\n    isAdmin: boolean;\r\n    isSuperAdmin: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [profile, setProfile] = useState<UserProfile | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (u) => {\r\n            setUser(u);\r\n            if (u) {\r\n                // Fetch profile to get roles\r\n                try {\r\n                    const p = await usersApi.syncUser(u.uid, u.email || '', u.displayName || 'User');\r\n                    setProfile(p);\r\n                } catch (error) {\r\n                    console.error('Error syncing user:', error);\r\n                }\r\n            } else {\r\n                setProfile(null);\r\n            }\r\n            setLoading(false);\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const value = {\r\n        user,\r\n        profile,\r\n        loading,\r\n        isAdmin: profile?.role === 'admin' || profile?.role === 'super-admin',\r\n        isSuperAdmin: profile?.role === 'super-admin'\r\n    };\r\n\r\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\context\\FilterContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":45,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":45,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react'\r\nimport { configsApi, FilterConfig } from '../lib/firebase/configs'\r\n\r\ninterface FilterContextType {\r\n    filters: FilterConfig | null\r\n    loading: boolean\r\n}\r\n\r\nconst FilterContext = createContext<FilterContextType | undefined>(undefined)\r\n\r\nexport function FilterProvider({ children }: { children: React.ReactNode }) {\r\n    const [filters, setFilters] = useState<FilterConfig | null>(null)\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = configsApi.subscribeFilters((data) => {\r\n            const currentYear = new Date().getFullYear()\r\n            // Legacy logic: All years since 2020, plus next year if it's near\r\n            const generatedYears = Array.from(\r\n                { length: currentYear - 2020 + 2 },\r\n                (_, i) => (currentYear + 1 - i).toString()\r\n            )\r\n\r\n            setFilters({\r\n                subjects: data.subjects || [],\r\n                categories: data.categories || [],\r\n                parts: data.parts || [],\r\n                languages: data.languages || [],\r\n                // Merge DB years with generated ones, ensuring uniqueness\r\n                years: Array.from(new Set([...generatedYears, ...(data.years || [])]))\r\n                    .sort((a, b) => parseInt(b) - parseInt(a))\r\n            })\r\n            setLoading(false)\r\n        })\r\n        return () => unsubscribe()\r\n    }, [])\r\n\r\n    return (\r\n        <FilterContext.Provider value={{ filters, loading }}>\r\n            {children}\r\n        </FilterContext.Provider>\r\n    )\r\n}\r\n\r\nexport function useFilters() {\r\n    const context = useContext(FilterContext)\r\n    if (context === undefined) {\r\n        throw new Error('useFilters must be used within a FilterProvider')\r\n    }\r\n    return context\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\context\\LanguageContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[297,300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[297,300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[919,922],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[919,922],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":46,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":46,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { translations } from '../lib/translations.ts';\r\n\r\ntype Language = 'en' | 'ta';\r\n\r\ninterface LanguageContextType {\r\n    language: Language;\r\n    setLanguage: (lang: Language) => void;\r\n    t: (path: string) => any;\r\n}\r\n\r\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\r\n\r\nexport function LanguageProvider({ children }: { children: React.ReactNode }) {\r\n    const [language, setLanguage] = useState<Language>(() => {\r\n        const saved = localStorage.getItem('language');\r\n        return (saved === 'en' || saved === 'ta') ? saved : 'en';\r\n    });\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('language', language);\r\n        document.documentElement.lang = language;\r\n    }, [language]);\r\n\r\n    const t = (path: string) => {\r\n        const keys = path.split('.');\r\n        let current: any = translations[language];\r\n\r\n        for (const key of keys) {\r\n            if (current && current[key] !== undefined) {\r\n                current = current[key];\r\n            } else {\r\n                return path; // Fallback to path if not found\r\n            }\r\n        }\r\n        return current;\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={{ language, setLanguage, t }}>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useLanguage() {\r\n    const context = useContext(LanguageContext);\r\n    if (context === undefined) {\r\n        throw new Error('useLanguage must be used within a LanguageProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase\\configs.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1039,1042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1039,1042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '../firebase'\r\nimport { doc, getDoc, setDoc, onSnapshot } from 'firebase/firestore'\r\n\r\nexport interface FilterConfig {\r\n    subjects: string[]\r\n    categories: string[]\r\n    parts: string[]\r\n    languages: string[]\r\n    years: string[]\r\n}\r\n\r\nexport interface SocialConfig {\r\n    twitter?: string\r\n    facebook?: string\r\n    instagram?: string\r\n}\r\n\r\nexport interface DonationConfig {\r\n    coffeePrice?: number\r\n    enabled?: boolean\r\n}\r\n\r\nexport const configsApi = {\r\n    async getFilters(): Promise<FilterConfig> {\r\n        const docRef = doc(db, 'configs', 'filters')\r\n        const snap = await getDoc(docRef)\r\n        if (snap.exists()) {\r\n            return snap.data() as FilterConfig\r\n        }\r\n        return { subjects: [], categories: [], parts: [], languages: [], years: [] }\r\n    },\r\n\r\n    async getAdminAuth(): Promise<{ email?: string, password?: string }> {\r\n        const docRef = doc(db, 'configs', 'admin_auth')\r\n        const snap = await getDoc(docRef)\r\n        return snap.exists() ? snap.data() as any : {}\r\n    },\r\n\r\n    subscribeFilters(callback: (filters: FilterConfig) => void) {\r\n        return onSnapshot(doc(db, 'configs', 'filters'), (snap) => {\r\n            if (snap.exists()) {\r\n                callback(snap.data() as FilterConfig)\r\n            } else {\r\n                callback({ subjects: [], categories: [], parts: [], languages: [], years: [] })\r\n            }\r\n        })\r\n    },\r\n\r\n    async updateFilters(filters: FilterConfig) {\r\n        await setDoc(doc(db, 'configs', 'filters'), filters)\r\n    },\r\n\r\n    async getSocials(): Promise<SocialConfig> {\r\n        const docRef = doc(db, 'configs', 'socials')\r\n        const snap = await getDoc(docRef)\r\n        return snap.exists() ? snap.data() as SocialConfig : {}\r\n    },\r\n\r\n    async updateSocials(socials: SocialConfig) {\r\n        await setDoc(doc(db, 'configs', 'socials'), socials)\r\n    },\r\n\r\n    subscribeSocials(callback: (socials: SocialConfig) => void) {\r\n        return onSnapshot(doc(db, 'configs', 'socials'), (snap) => {\r\n            if (snap.exists()) {\r\n                callback(snap.data() as SocialConfig)\r\n            } else {\r\n                callback({})\r\n            }\r\n        })\r\n    },\r\n\r\n    async getDonationSettings(): Promise<DonationConfig> {\r\n        const docRef = doc(db, 'configs', 'donations')\r\n        const snap = await getDoc(docRef)\r\n        return snap.exists() ? snap.data() as DonationConfig : { coffeePrice: 5, enabled: true }\r\n    },\r\n\r\n    async updateDonationSettings(settings: DonationConfig) {\r\n        await setDoc(doc(db, 'configs', 'donations'), settings)\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase\\donations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase\\papers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase\\schema.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[609,612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[609,612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[654,657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[654,657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[869,872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[869,872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1132,1135],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1132,1135],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Firestore Schema Definitions\r\n\r\nexport interface Paper {\r\n    id?: string;\r\n    title: string;\r\n    subject: string;\r\n    year: number;\r\n    examType: string; // 'Final', 'Midterm', etc.\r\n    part: string;\r\n    language: string;\r\n    fileUrl: string;\r\n\r\n    // Search Optimization\r\n    keywords: string[]; // ['m', 'ma', 'math', '2023']\r\n\r\n    // Denormalized Metadata for UI efficiency\r\n    metadata: {\r\n        uploadedBy: string; // User UID\r\n        uploaderName: string; // Display Name\r\n        fileSize?: number;\r\n        mimeType?: string;\r\n        originalName?: string;\r\n    };\r\n\r\n    createdAt: any; // Firestore Timestamp\r\n    updatedAt?: any;\r\n}\r\n\r\nexport interface UserProfile {\r\n    uid: string;\r\n    email: string;\r\n    displayName: string;\r\n    role: 'admin' | 'user' | 'super-admin';\r\n    blocked?: boolean;\r\n    photoURL?: string;\r\n    createdAt: any;\r\n}\r\n\r\nexport interface Contribution {\r\n    id?: string;\r\n    donorName: string;\r\n    email: string;\r\n    amount: number;\r\n    currency: string;\r\n    status: 'succeeded' | 'pending' | 'failed';\r\n    coffeeCount: number;\r\n    message?: string;\r\n    timestamp: any;\r\n    receiptId?: string;\r\n}\r\n\r\nexport interface FilterOptions {\r\n    subject?: string;\r\n    year?: number;\r\n    examType?: string;\r\n    part?: string;\r\n    language?: string;\r\n    searchQuery?: string;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase\\seed.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[634,637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[634,637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '../firebase'\r\nimport { doc, setDoc, getDoc } from 'firebase/firestore'\r\n\r\nexport const seedData = async () => {\r\n    // Initial Stats\r\n    const statsRef = doc(db, 'stats', 'global')\r\n    const statsSnap = await getDoc(statsRef)\r\n    if (!statsSnap.exists()) {\r\n        await setDoc(statsRef, {\r\n            visitors: 1250,\r\n            contributors: 42,\r\n            papersEngagement: 8900\r\n        })\r\n    }\r\n\r\n    // Initial Filters\r\n    const filtersRef = doc(db, 'configs', 'filters')\r\n    const filtersSnap = await getDoc(filtersRef)\r\n    const existingFilters = filtersSnap.exists() ? filtersSnap.data() as any : {}\r\n\r\n    const coreFilters = {\r\n        subjects: existingFilters.subjects || ['Mathematics', 'Science', 'History', 'Geography', 'Civics', 'English', 'Tamil'],\r\n        categories: existingFilters.categories || ['PAPER', 'SCHEME'],\r\n        parts: existingFilters.parts || ['Part 1', 'Part 2'],\r\n        languages: Array.from(new Set(['English', 'Tamil', ...(existingFilters.languages || [])])),\r\n        years: Array.from(new Set([\r\n            ...Array.from({ length: new Date().getFullYear() - 2020 + 2 }, (_, i) => (new Date().getFullYear() + 1 - i).toString()),\r\n            ...(existingFilters.years || [])\r\n        ])).sort((a, b) => parseInt(b) - parseInt(a))\r\n    }\r\n\r\n    await setDoc(filtersRef, coreFilters, { merge: true })\r\n\r\n    // Initial Socials\r\n    const socialsRef = doc(db, 'configs', 'socials')\r\n    const socialsSnap = await getDoc(socialsRef)\r\n    if (!socialsSnap.exists()) {\r\n        await setDoc(socialsRef, {\r\n            twitter: 'https://twitter.com/meritorious',\r\n            facebook: 'https://facebook.com/meritorious',\r\n            instagram: 'https://instagram.com/meritorious'\r\n        })\r\n    }\r\n\r\n    // Initial Admin Auth (For non-Google login parity)\r\n    const adminEmail = import.meta.env.VITE_ADMIN_EMAIL || 'admin@gmail.com'\r\n    const adminAuthRef = doc(db, 'configs', 'admin_auth')\r\n    const adminAuthSnap = await getDoc(adminAuthRef)\r\n    if (!adminAuthSnap.exists()) {\r\n        await setDoc(adminAuthRef, {\r\n            email: adminEmail,\r\n            password: import.meta.env.VITE_ADMIN_PASSWORD || 'adminMPPMS'\r\n        })\r\n    }\r\n\r\n    // Ensure system-admin role is registered\r\n    const adminUserRef = doc(db, 'users', 'system-admin')\r\n    const adminUserSnap = await getDoc(adminUserRef)\r\n    if (!adminUserSnap.exists()) {\r\n        await setDoc(adminUserRef, {\r\n            uid: 'system-admin',\r\n            email: adminEmail,\r\n            displayName: 'System Admin',\r\n            role: 'admin'\r\n        })\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase\\stats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\firebase\\users.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\receipts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\translations.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27,30],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27,30],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const translations: any = {\r\n    en: {\r\n        nav: {\r\n            papers: \"Papers\",\r\n            about: \"About\",\r\n            signIn: \"Sign In\",\r\n            logout: \"Logout\",\r\n            profile: \"User Profile\"\r\n        },\r\n        hero: {\r\n            eyebrow: \"Meritorious Past Paper Management System\",\r\n            title: {\r\n                main: \"Master Your\",\r\n                highlight: \"Exams\",\r\n                sub: \"with Ease\"\r\n            },\r\n            description: \"Access a comprehensive database of past papers, categorized and filtered for your academic success. All in one place.\",\r\n            cta: {\r\n                primary: \"See Papers\",\r\n                secondary: \"Contribute\"\r\n            }\r\n        },\r\n        filters: {\r\n            title: \"Quick Filters\",\r\n            search: \"Search papers...\",\r\n            reset: \"Reset Filters\",\r\n            placeholders: {\r\n                subject: \"All Subjects\",\r\n                year: \"All Years\",\r\n                category: \"All Categories\",\r\n                part: \"All Parts\"\r\n            }\r\n        },\r\n        papers: {\r\n            title: \"Available Papers\",\r\n            empty: {\r\n                title: \"No papers found\",\r\n                description: \"Try adjusting your filters or search query.\",\r\n                reset: \"Reset all filters\"\r\n            },\r\n            card: {\r\n                addedBy: \"Added by\",\r\n                edit: \"Edit Paper\",\r\n                delete: \"Delete Paper\",\r\n                confirmDelete: \"Are you sure you want to delete\"\r\n            },\r\n            alerts: {\r\n                deleteSuccess: \"Paper deleted successfully\",\r\n                deleteError: \"Failed to delete paper\"\r\n            }\r\n        },\r\n        about: {\r\n            hero: {\r\n                title: \"Empowering Students Through\",\r\n                highlight: \"Organized Knowledge\",\r\n                description: \"MPPMS is a modern document management system designed to make past paper accessibility seamless, fast, and reliable for students and educators worldwide.\"\r\n            },\r\n            features: [\r\n                {\r\n                    title: \"Extensive Collection\",\r\n                    description: \"Access a vast library of past papers and marking schemes across multiple years and subjects.\"\r\n                },\r\n                {\r\n                    title: \"Fast Discovery\",\r\n                    description: \"Find exactly what you need in seconds with our optimized filtering and search experience.\"\r\n                },\r\n                {\r\n                    title: \"Verified Content\",\r\n                    description: \"All uploaded papers are reviewed to ensure accuracy and high quality for student preparation.\"\r\n                },\r\n                {\r\n                    title: \"Community Driven\",\r\n                    description: \"Built for students, by students and educators committed to academic excellence.\"\r\n                }\r\n            ],\r\n            mission: {\r\n                title: \"Our Mission\",\r\n                description: \"To build the most accessible and student-friendly repository of academic resources, eliminating the barriers to high-quality preparation material.\"\r\n            }\r\n        },\r\n        addPaper: {\r\n            dashboard: \"Upload Dashboard\",\r\n            title: {\r\n                add: \"Add New\",\r\n                edit: \"Edit\",\r\n                highlight: \"Paper\"\r\n            },\r\n            form: {\r\n                year: \"Publication Year\",\r\n                category: \"Resource Type\",\r\n                language: \"Language\",\r\n                part: \"Academic Part\",\r\n                name: \"Display Name\",\r\n                subject: \"Academic Subject\",\r\n                placeholder: {\r\n                    name: \"e.g. Mathematics 2023\",\r\n                    subject: \"Select Subject\"\r\n                },\r\n                dropzone: {\r\n                    keep: \"Leave empty to keep existing PDF\"\r\n                },\r\n                submit: {\r\n                    save: \"Save Changes\",\r\n                    publish: \"Publish\"\r\n                },\r\n                alerts: {\r\n                    selectPdf: \"Please select a PDF file\",\r\n                    saveSuccess: \"Paper saved successfully\",\r\n                    saveError: \"Failed to save paper\"\r\n                }\r\n            }\r\n        }\r\n    },\r\n    ta: {\r\n        nav: {\r\n            papers: \"வினாத்தாள்கள்\",\r\n            about: \"பற்றி\",\r\n            signIn: \"உள்நுழைய\",\r\n            logout: \"வெளியேறு\",\r\n            profile: \"பயனர் விவரம்\"\r\n        },\r\n        hero: {\r\n            eyebrow: \"மெரிடோரியஸ் வினாத்தாள் மேலாண்மை அமைப்பு\",\r\n            title: {\r\n                main: \"உங்கள்\",\r\n                highlight: \"தேர்வுகளில்\",\r\n                sub: \"வெற்றி பெறுங்கள்\"\r\n            },\r\n            description: \"உங்கள் கல்வி வெற்றிக்குத் தேவையான வினாத்தாள்களின் விரிவான தரவுத்தளத்தை ஒரே இடத்தில் அணுகுங்கள்.\",\r\n            cta: {\r\n                primary: \"வினாத்தாள்களைக் காண்க\",\r\n                secondary: \"பங்களிக்கவும்\"\r\n            }\r\n        },\r\n        filters: {\r\n            title: \"விரைவான வடிப்பான்கள்\",\r\n            search: \"தேடுக...\",\r\n            reset: \"வடிப்பான்களை மீட்டமை\",\r\n            placeholders: {\r\n                subject: \"அனைத்து பாடங்களும்\",\r\n                year: \"அனைத்து ஆண்டுகளும்\",\r\n                category: \"அனைத்து வகைகளும்\",\r\n                part: \"அனைத்து பிரிவுகளும்\"\r\n            }\r\n        },\r\n        papers: {\r\n            title: \"கிடைக்கக்கூடிய வினாத்தாள்கள்\",\r\n            empty: {\r\n                title: \"வினாத்தாள்கள் எதுவும் இல்லை\",\r\n                description: \"உங்கள் வடிப்பான்கள் அல்லது தேடலை மாற்ற முயற்சிக்கவும்.\",\r\n                reset: \"அனைத்தையும் மீட்டமை\"\r\n            },\r\n            card: {\r\n                addedBy: \"பதிவேற்றியவர்\",\r\n                edit: \"திருத்து\",\r\n                delete: \"நீக்கு\",\r\n                confirmDelete: \"நிச்சயமாக நீக்க விரும்புகிறீர்களா\"\r\n            },\r\n            alerts: {\r\n                deleteSuccess: \"வினாத்தாள் வெற்றிகரமாக நீக்கப்பட்டது\",\r\n                deleteError: \"வினாத்தாளை நீக்க முடியவில்லை\"\r\n            }\r\n        },\r\n        about: {\r\n            hero: {\r\n                title: \"மாணவர்களை மேம்படுத்துதல்\",\r\n                highlight: \"ஒழுங்கமைக்கப்பட்ட அறிவு\",\r\n                description: \"MPPMS என்பது வினாத்தாள் அணுகலை எளிமையாகவும், வேகமாகவும் மற்றும் நம்பகமானதாகவும் மாற்ற வடிவமைக்கப்பட்ட ஒரு நவீன ஆவண மேலாண்மை அமைப்பாகும்.\"\r\n            },\r\n            features: [\r\n                {\r\n                    title: \"விரிவான தொகுப்பு\",\r\n                    description: \"பல ஆண்டுகள் மற்றும் பாடங்களின் வினாத்தாள்கள் மற்றும் புள்ளித்திட்டங்களின் விரிவான நூலகத்தை அணுகவும்.\"\r\n                },\r\n                {\r\n                    title: \"விரைவான தேடல்\",\r\n                    description: \"எங்கள் உகந்த தேடல் அனுபவத்தின் மூலம் உங்களுக்குத் தேவையானதை நொடிகளில் கண்டறியவும்.\"\r\n                },\r\n                {\r\n                    title: \"சரிபார்க்கப்பட்ட உள்ளடக்கம்\",\r\n                    description: \"அனைத்து பதிவேற்றப்பட்ட தாள்களும் துல்லியம் மற்றும் தரம் உறுதி செய்ய சரிபார்க்கப்படுகின்றன.\"\r\n                },\r\n                {\r\n                    title: \"சமூகத்தால் இயக்கப்படுகிறது\",\r\n                    description: \"கல்வி சிறப்பிற்காக அர்ப்பணிக்கப்பட்ட மாணவர்கள் மற்றும் கல்வியாளர்களால் உருவாக்கப்பட்டது.\"\r\n                }\r\n            ],\r\n            mission: {\r\n                title: \"எங்கள் நோக்கம்\",\r\n                description: \"கல்வி வளங்களை மாணவர்கள் எளிதில் அணுகக்கூடிய வகையில் உருவாக்குவதே எங்களின் நோக்கம்.\"\r\n            }\r\n        },\r\n        addPaper: {\r\n            dashboard: \"பதிவேற்ற மேலாண்மை\",\r\n            title: {\r\n                add: \"புதிய\",\r\n                edit: \"மாற்றுக\",\r\n                highlight: \"வினாத்தாள்\"\r\n            },\r\n            form: {\r\n                year: \"வெளியிடப்பட்ட ஆண்டு\",\r\n                category: \"ஆதார வகை\",\r\n                language: \"மொழி\",\r\n                part: \"பகுதி\",\r\n                name: \"பெயர்\",\r\n                subject: \"பாடம்\",\r\n                placeholder: {\r\n                    name: \"உதாரணம்: கணிதம் 2023\",\r\n                    subject: \"பாடத்தைத் தேர்ந்தெடுக்கவும்\"\r\n                },\r\n                dropzone: {\r\n                    keep: \"ஏற்கனவே உள்ள PDF-ஐ வைத்திருக்க காலியாக விடவும்\"\r\n                },\r\n                submit: {\r\n                    save: \"மாற்றங்களைச் சேமி\",\r\n                    publish: \"வெளியிடு\"\r\n                },\r\n                alerts: {\r\n                    selectPdf: \"தயவுசெய்து ஒரு PDF கோப்பைத் தேர்ந்தெடுக்கவும்\",\r\n                    saveSuccess: \"வினாத்தாள் வெற்றிகரமாக சேமிக்கப்பட்டது\",\r\n                    saveError: \"வினாத்தாளை சேமிக்க முடியவில்லை\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\utils\\ai-extractor.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[879,882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[879,882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as pdfjsLib from 'pdfjs-dist';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\n// Set up PDF.js worker\r\npdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.mjs`;\r\n\r\nconst genAI = new GoogleGenerativeAI(import.meta.env.VITE_GEMINI_API_KEY);\r\n\r\nexport async function extractTextFromPDF(file: File): Promise<string> {\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\r\n\r\n    let fullText = '';\r\n    // Usually the first 2 pages are enough for metadata\r\n    const pagesToRead = Math.min(pdf.numPages, 2);\r\n\r\n    for (let i = 1; i <= pagesToRead; i++) {\r\n        const page = await pdf.getPage(i);\r\n        const textContent = await page.getTextContent();\r\n        const pageText = textContent.items.map((item: any) => item.str).join(' ');\r\n        fullText += pageText + '\\n';\r\n    }\r\n\r\n    return fullText;\r\n}\r\n\r\nexport async function analyzePaperWithAI(text: string) {\r\n    const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\n    const prompt = `\r\n        Analyze the following text extracted from a past exam paper and extract the metadata in JSON format.\r\n        Rules:\r\n        1. Subject: Must be one of the common subjects (e.g., Mathematics, Physics, Chemistry, Biology, Information Technology, Economics, etc.).\r\n        2. Year: A 4-digit year (e.g., 2023).\r\n        3. Exam Type: Must be \"A/L\" or \"O/L\".\r\n        4. Part: Must be \"Part I\", \"Part II\", or \"Full Paper\".\r\n        5. Language: Must be \"English\", \"Sinhala\", or \"Tamil\".\r\n        6. Title: Create a professional title (e.g., \"G.C.E. A/L Physics 2023 Part I\").\r\n\r\n        Return ONLY a JSON object with these keys: title, subject, year, examType, part, language.\r\n\r\n        Text:\r\n        ${text.substring(0, 4000)}\r\n    `;\r\n\r\n    const result = await model.generateContent(prompt);\r\n    const response = await result.response;\r\n    const jsonText = response.text().replace(/```json/g, '').replace(/```/g, '').trim();\r\n\r\n    return JSON.parse(jsonText);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\lib\\utils\\hostname.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projects\\MPPMS\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]